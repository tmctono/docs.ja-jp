---
title: Windows フォームのセキュリティの概要
ms.date: 03/30/2017
helpviewer_keywords:
- code access security [Windows Forms], Windows Forms
- permissions [Windows Forms], Windows Forms
- Windows Forms, security
- security [Windows Forms], about security
- access control [Windows Forms], Windows Forms
ms.assetid: 4810dc9f-ea23-4ce1-8ea1-657f0ff1d820
ms.openlocfilehash: 08c80eccee395d9141978a7d4594205af1a51ed9
ms.sourcegitcommit: 7b1ce327e8c84f115f007be4728d29a89efe11ef
ms.translationtype: MT
ms.contentlocale: ja-JP
ms.lasthandoff: 09/13/2019
ms.locfileid: "70972130"
---
# <a name="security-in-windows-forms-overview"></a><span data-ttu-id="a02b0-102">Windows フォームのセキュリティの概要</span><span class="sxs-lookup"><span data-stu-id="a02b0-102">Security in Windows Forms Overview</span></span>

<span data-ttu-id="a02b0-103">.NET Framework のリリース前に、ユーザーのコンピューターで実行されているすべてのコードに、そのコンピューターのユーザーが持っていたリソースにアクセスするための権限またはアクセス許可が与えられています。</span><span class="sxs-lookup"><span data-stu-id="a02b0-103">Before the release of the .NET Framework, all code running on a user's computer had the same rights or permissions to access resources that a user of the computer had.</span></span> <span data-ttu-id="a02b0-104">たとえば、ユーザーにファイル システムへのアクセスが許可されている場合は、コードにファイル システムへのアクセスが許可され、ユーザーにデータベースへのアクセスが許可されている場合は、コードにデータベースへのアクセスが許可されていました。</span><span class="sxs-lookup"><span data-stu-id="a02b0-104">For example, if the user was allowed to access the file system, the code was allowed to access the file system; if the user was allowed to access a database, the code was allowed to access that database.</span></span> <span data-ttu-id="a02b0-105">これらの権限やアクセス許可は、ユーザーがローカル コンピューターに明示的にインストールした実行可能ファイルのコードに対しては受け入れることができますが、インターネットやローカル イントラネットからの悪意のある可能性があるコードに対しては受け入れることができません。</span><span class="sxs-lookup"><span data-stu-id="a02b0-105">Although these rights or permissions may be acceptable for code in executables that the user has explicitly installed on the local computer, they may not be acceptable for potentially malicious code coming from the Internet or a local Intranet.</span></span> <span data-ttu-id="a02b0-106">このコードは、アクセス許可がないユーザーのコンピューター リソースにアクセスすべきではありません。</span><span class="sxs-lookup"><span data-stu-id="a02b0-106">This code should not be able to access the user's computer resources without permission.</span></span>

<span data-ttu-id="a02b0-107">この .NET Framework では、コードが持つアクセス許可または権限を、ユーザーが持っている権限と区別できるようにする、コードアクセスセキュリティと呼ばれるインフラストラクチャを導入しています。</span><span class="sxs-lookup"><span data-stu-id="a02b0-107">The .NET Framework introduces an infrastructure called Code Access Security that lets you differentiate the permissions, or rights, that code has from the rights that the user has.</span></span> <span data-ttu-id="a02b0-108">既定では、インターネットとイントラネットからのコードは、部分信頼と呼ばれるものでのみ実行できます。</span><span class="sxs-lookup"><span data-stu-id="a02b0-108">By default, code coming from the Internet and the Intranet can only run in what is known as partial trust.</span></span> <span data-ttu-id="a02b0-109">部分信頼では、アプリケーションに一連の制限が適用されます。特に、アプリケーションはローカルのハード ディスクへのアクセスが制限され、アンマネージ コードを実行することができません。</span><span class="sxs-lookup"><span data-stu-id="a02b0-109">Partial trust subjects an application to a series of restrictions: among other things, an application is restricted from accessing the local hard disk, and cannot run unmanaged code.</span></span> <span data-ttu-id="a02b0-110">この .NET Framework は、コードの id に基づいて、コードがアクセスできるリソースを制御します。そのコードの出所は、[厳密な名前付きのアセンブリ](../../standard/assembly/strong-named.md)があるかどうか、証明書で署名されているかどうかなどによって決まります。</span><span class="sxs-lookup"><span data-stu-id="a02b0-110">The .NET Framework controls the resources that code is allowed to access based on the identity of that code: where it came from, whether it has a [Strong-Named Assemblies](../../standard/assembly/strong-named.md), whether it is signed with a certificate, and so on.</span></span>

<span data-ttu-id="a02b0-111">Windows フォームアプリケーションの配置に使用する ClickOnce テクノロジを使用すると、部分信頼で実行されるアプリケーションを、完全信頼で、または高度な権限で部分信頼で開発しやすくなります。</span><span class="sxs-lookup"><span data-stu-id="a02b0-111">ClickOnce technology, which you use to deploy Windows Forms applications, helps make it easier for you to develop applications that run in partial trust, in full trust, or in partial trust with elevated permissions.</span></span> <span data-ttu-id="a02b0-112">ClickOnce は、アクセス許可の昇格や信頼されたアプリケーションの配置などの機能を提供します。これにより、アプリケーションは完全な信頼または昇格されたアクセス許可をローカルユーザーから責任のある方法で要求できます。</span><span class="sxs-lookup"><span data-stu-id="a02b0-112">ClickOnce provides features such as Permission Elevation and Trusted Application Deployment so that your application can request full trust or elevated permissions from the local user in a responsible manner.</span></span>

## <a name="understanding-security-in-the-net-framework"></a><span data-ttu-id="a02b0-113">.NET Framework のセキュリティについて</span><span class="sxs-lookup"><span data-stu-id="a02b0-113">Understanding Security in the .NET Framework</span></span>

<span data-ttu-id="a02b0-114">コード アクセス セキュリティにより、コードの発生元や、そのコードの身元を示すその他の基準に基づいて、コードをさまざまなレベルで信頼できます。</span><span class="sxs-lookup"><span data-stu-id="a02b0-114">Code access security allows code to be trusted to varying degrees, depending on where the code originates and on other aspects of the code's identity.</span></span> <span data-ttu-id="a02b0-115">共通言語ランタイムがセキュリティ ポリシーを決定するために使用する証拠の詳細については、「[証拠](https://docs.microsoft.com/previous-versions/dotnet/netframework-4.0/7y5x1hcd(v=vs.100))」を参照してください。</span><span class="sxs-lookup"><span data-stu-id="a02b0-115">For more information about the evidence the common language runtime uses to determine security policy, see [Evidence](https://docs.microsoft.com/previous-versions/dotnet/netframework-4.0/7y5x1hcd(v=vs.100)).</span></span> <span data-ttu-id="a02b0-116">悪意のあるコードからコンピューター システムを保護できるだけでなく、セキュリティの意図的または偶然の侵害から信頼されているコードを保護できます。</span><span class="sxs-lookup"><span data-stu-id="a02b0-116">It helps protect computer systems from malicious code and helps protect trusted code from intentionally or accidentally compromising security.</span></span> <span data-ttu-id="a02b0-117">また、コード アクセス セキュリティは、アプリケーションが実行できるアクションに対して詳細に制御できます。これは、アプリケーションが持っている必要があるアクセス許可のみを指定できるためです。</span><span class="sxs-lookup"><span data-stu-id="a02b0-117">Code access security also gives you more control over what actions your application can perform, because you can specify only those permissions you need your application to have.</span></span> <span data-ttu-id="a02b0-118">コード アクセス セキュリティは、コードが単一のコード アクセス セキュリティのアクセス許可のチェックをしない場合でも、共通言語ランタイムを対象とするすべてのマネージド コードに影響を与えます。</span><span class="sxs-lookup"><span data-stu-id="a02b0-118">Code access security affects all managed code that targets the common language runtime, even if that code does not make a single code-access-security permission check.</span></span> <span data-ttu-id="a02b0-119">.NET Framework のセキュリティの詳細については、「セキュリティの基本[概念](../../standard/security/key-security-concepts.md)」および「[コードアクセスセキュリティの基礎](../misc/code-access-security-basics.md)」を参照してください。</span><span class="sxs-lookup"><span data-stu-id="a02b0-119">For more information about security in the .NET Framework, see [Key Security Concepts](../../standard/security/key-security-concepts.md) and [Code Access Security Basics](../misc/code-access-security-basics.md).</span></span>

<span data-ttu-id="a02b0-120">ユーザーが Windows フォームの実行可能ファイルを Web サーバーまたはファイル共有から直接実行する場合、アプリケーションに付与される信頼の度合いは、コードが存在する場所や開始方法によって異なります。</span><span class="sxs-lookup"><span data-stu-id="a02b0-120">If the user run a Windows Forms executable file directly off of a Web server or a file share, the degree of trust granted to your application depends on where the code resides, and how it is started.</span></span> <span data-ttu-id="a02b0-121">アプリケーションを実行すると、自動的に評価され、共通言語ランタイムから、名前付き権限セットを受け取ります。</span><span class="sxs-lookup"><span data-stu-id="a02b0-121">When an application runs, it is automatically evaluated and it receives a named permission set from the common language runtime.</span></span> <span data-ttu-id="a02b0-122">既定では、ローカル コンピューターからのコードに完全信頼のアクセス許可セットが付与され、ローカル ネットワークからのコードには、ローカル イントラネットのアクセス許可セットが付与され、インターネットからのコードには、インターネットのアクセス許可セットが付与されます。</span><span class="sxs-lookup"><span data-stu-id="a02b0-122">By default, the code from the local computer is granted the Full Trust permission set, code from a local network is granted the Local Intranet permission set, and code from the Internet is granted the Internet permission set.</span></span>

> [!NOTE]
> <span data-ttu-id="a02b0-123">.NET Framework バージョン 1.0 Service Pack 1 および Service Pack 2 では、インターネットゾーンのコードグループは、何もアクセス許可セットを受け取りません。</span><span class="sxs-lookup"><span data-stu-id="a02b0-123">In the .NET Framework version 1.0 Service Pack 1 and Service Pack 2, the Internet zone code group receives the Nothing permission set.</span></span> <span data-ttu-id="a02b0-124">.NET Framework の他のすべてのリリースでは、インターネットゾーンのコードグループは、インターネットのアクセス許可セットを受け取ります。</span><span class="sxs-lookup"><span data-stu-id="a02b0-124">In all other releases of the .NET Framework, the Internet zone code group receives the Internet permissions set.</span></span>
>
> <span data-ttu-id="a02b0-125">これらの各アクセス許可セットで付与される既定のアクセス許可の一覧については、「[既定のセキュリティ ポリシー](https://docs.microsoft.com/previous-versions/dotnet/netframework-4.0/03kwzyfc(v=vs.100))」を参照してください。</span><span class="sxs-lookup"><span data-stu-id="a02b0-125">The default permissions granted in each of these permission sets are listed in the [Default Security Policy](https://docs.microsoft.com/previous-versions/dotnet/netframework-4.0/03kwzyfc(v=vs.100)) topic.</span></span> <span data-ttu-id="a02b0-126">アプリケーションが受け取るアクセス許可に応じて、正常に実行されるか、またはセキュリティ例外が生成されます。</span><span class="sxs-lookup"><span data-stu-id="a02b0-126">Depending on the permissions that the application receives, it either runs correctly or generates a security exception.</span></span>
>
> <span data-ttu-id="a02b0-127">多くの Windows フォームアプリケーションは、ClickOnce を使用してデプロイされます。</span><span class="sxs-lookup"><span data-stu-id="a02b0-127">Many Windows Forms applications will be deployed using ClickOnce.</span></span> <span data-ttu-id="a02b0-128">ClickOnce 配置の生成に使用されるツールには、前に説明したものとは異なるセキュリティの既定値があります。</span><span class="sxs-lookup"><span data-stu-id="a02b0-128">The tools used for generating a ClickOnce deployment have different security defaults than what was discussed earlier.</span></span> <span data-ttu-id="a02b0-129">詳細については、次の説明を参照してください。</span><span class="sxs-lookup"><span data-stu-id="a02b0-129">For more information, see the following discussion.</span></span>

<span data-ttu-id="a02b0-130">アプリケーションに付与される実際のアクセス許可は、セキュリティ ポリシーが変更される可能性があるため、既定値とは異なる可能性があります。つまり、アプリケーションが、あるコンピューターではアクセス許可を持ち、別のコンピューターでは持たない可能性があることを意味します。</span><span class="sxs-lookup"><span data-stu-id="a02b0-130">The actual permissions granted to your application can be different from the default values, because the security policy can be modified; this means that your application can have permission on one computer, but not on another.</span></span>

## <a name="developing-a-more-secure-windows-forms-application"></a><span data-ttu-id="a02b0-131">より安全な Windows フォーム アプリケーションの開発</span><span class="sxs-lookup"><span data-stu-id="a02b0-131">Developing a More Secure Windows Forms Application</span></span>

<span data-ttu-id="a02b0-132">セキュリティは、アプリケーション開発のすべての手順で重要です。</span><span class="sxs-lookup"><span data-stu-id="a02b0-132">Security is important in all steps of application development.</span></span> <span data-ttu-id="a02b0-133">まず、「[安全なコーディングのガイドライン](../../standard/security/secure-coding-guidelines.md)」を確認し、このガイドラインに従います。</span><span class="sxs-lookup"><span data-stu-id="a02b0-133">Start by reviewing and following the [Secure Coding Guidelines](../../standard/security/secure-coding-guidelines.md).</span></span>

<span data-ttu-id="a02b0-134">次に、アプリケーションを完全信頼で実行する必要があるのか、または部分信頼で実行する必要があるのかを決定します。</span><span class="sxs-lookup"><span data-stu-id="a02b0-134">Next, decide whether your application must run in full trust, or whether it should run in partial trust.</span></span> <span data-ttu-id="a02b0-135">完全信頼でアプリケーションを実行することで、ローカル コンピューター上のリソースへのアクセスが簡単になりますが、「安全なコーディングのガイドライン」のトピックに厳密に従ってアプリケーションを設計および開発しない場合、ユーザーとアプリケーションを高いセキュリティ リスクに晒すことになります。</span><span class="sxs-lookup"><span data-stu-id="a02b0-135">Running your application in full trust makes it easier to access resources on the local computer, but exposes your application and its users to high security risks if you do not design and develop your application strictly according to the Secure Coding Guidelines topic.</span></span> <span data-ttu-id="a02b0-136">部分信頼でアプリケーションを実行すると、より安全なアプリケーションをより簡単に開発でき、リスクを大幅に軽減しますが、特定の機能の実装方法について、より詳細な計画が必要になります。</span><span class="sxs-lookup"><span data-stu-id="a02b0-136">Running your application in partial trust makes it easier to develop a more secure application and reduces much risk, but requires more planning in how to implement certain features.</span></span>

<span data-ttu-id="a02b0-137">部分信頼 (つまり、インターネットまたはローカル イントラネットのアクセス許可セットのいずれか) を選択する場合は、アプリケーションがこの環境で動作する方法を決定します。</span><span class="sxs-lookup"><span data-stu-id="a02b0-137">If you choose partial trust (that is, either the Internet or Local Intranet permission sets), decide how you want your application to behave in this environment.</span></span> <span data-ttu-id="a02b0-138">Windows フォームでは、信頼度の低い環境で、より安全に機能を実装する代わりの方法を提供します。</span><span class="sxs-lookup"><span data-stu-id="a02b0-138">Windows Forms provides alternative, more secure ways to implement features when in a semi-trusted environment.</span></span> <span data-ttu-id="a02b0-139">データ アクセスなど、アプリケーションの特定の部分が、部分信頼および完全信頼の両方の環境で異なる設計と作成がなされる場合があります。</span><span class="sxs-lookup"><span data-stu-id="a02b0-139">Certain parts of your application, such as data access, can be designed and written differently for both partial trust and full trust environments.</span></span> <span data-ttu-id="a02b0-140">アプリケーション設定など、一部の Windows フォームの機能は、部分信頼で動作するよう設計されています。</span><span class="sxs-lookup"><span data-stu-id="a02b0-140">Some Windows Forms features, such as application settings, are designed to work in partial trust.</span></span> <span data-ttu-id="a02b0-141">詳細については、「[アプリケーション設定の概要](./advanced/application-settings-overview.md)」を参照してください。</span><span class="sxs-lookup"><span data-stu-id="a02b0-141">For more information, see [Application Settings Overview](./advanced/application-settings-overview.md).</span></span>

<span data-ttu-id="a02b0-142">アプリケーションが部分信頼で許可するより多くのアクセス許可を必要とするが、完全信頼モードで実行したくない場合は、部分信頼で実行しながら、必要な追加のアクセス許可のみをアサートすることができます。</span><span class="sxs-lookup"><span data-stu-id="a02b0-142">If your application needs more permissions than partial trust allows, but you do not want to run in full trust, you can run in partial trust while asserting only those additional permissions you need.</span></span> <span data-ttu-id="a02b0-143">たとえば、部分信頼で実行するが、ユーザーのファイル システム上のディレクトリに、アプリケーションの読み取り専用のアクセス許可を付与する必要がある場合、そのディレクトリのみに対して <xref:System.Security.Permissions.FileIOPermission> を要求することができます。</span><span class="sxs-lookup"><span data-stu-id="a02b0-143">For example, if you want to run in partial trust, but must grant your application read-only access to a directory on the user's file system, you can request <xref:System.Security.Permissions.FileIOPermission> only for that directory.</span></span> <span data-ttu-id="a02b0-144">適切に使用すると、このアプローチによってアプリケーションの機能が増加し、ユーザーのセキュリティ上のリスクを最小限に抑えることができます。</span><span class="sxs-lookup"><span data-stu-id="a02b0-144">Used correctly, this approach can give your application increased functionality and minimize security risks to your users.</span></span>

<span data-ttu-id="a02b0-145">部分信頼で実行されるアプリケーションを開発するときに、アプリケーションが実行する必要があるアクセス許可と、アプリケーションがオプションで使用できるアクセス許可を管理してください。</span><span class="sxs-lookup"><span data-stu-id="a02b0-145">When you develop an application that will run in partial trust, keep track of what permissions your application must run and what permissions your application could optionally use.</span></span> <span data-ttu-id="a02b0-146">すべてのアクセス許可がわかっている場合、アプリケーション レベルでアクセス許可について宣言型の要求をする必要があります。</span><span class="sxs-lookup"><span data-stu-id="a02b0-146">When all the permissions are known, you should make a declarative request for permission at the application level.</span></span> <span data-ttu-id="a02b0-147">アクセス許可を要求すると、アプリケーションが必要とするアクセス許可と、特に必要のないアクセス許可について、.NET Framework の実行時間が通知されます。</span><span class="sxs-lookup"><span data-stu-id="a02b0-147">Requesting permissions informs the .NET Framework run time about which permissions your application needs and which permissions it specifically does not want.</span></span> <span data-ttu-id="a02b0-148">アクセス許可の要求の詳細については、「[アクセス許可の要求](https://docs.microsoft.com/previous-versions/dotnet/netframework-4.0/yd267cce(v=vs.100))」を参照してください。</span><span class="sxs-lookup"><span data-stu-id="a02b0-148">For more information about requesting permissions, see [Requesting Permissions](https://docs.microsoft.com/previous-versions/dotnet/netframework-4.0/yd267cce(v=vs.100)).</span></span>

<span data-ttu-id="a02b0-149">オプションのアクセス許可を要求するときに、アプリケーションに付与されていないアクセス許可が必要なアクションを実行する場合に生成されるセキュリティ例外を処理する必要があります。</span><span class="sxs-lookup"><span data-stu-id="a02b0-149">When you request optional permissions, you must handle security exceptions that will be generated if your application performs an action that requires permissions not granted to it.</span></span> <span data-ttu-id="a02b0-150"><xref:System.Security.SecurityException> を適切に処理することで、アプリケーションを続行できます。</span><span class="sxs-lookup"><span data-stu-id="a02b0-150">Appropriate handling of the <xref:System.Security.SecurityException> will ensure that your application can continue to operate.</span></span> <span data-ttu-id="a02b0-151">アプリケーションは例外を使用して、ユーザーに対して機能を無効にする必要があるかどうかを判断できます。</span><span class="sxs-lookup"><span data-stu-id="a02b0-151">Your application can use the exception to determine whether a feature should become disabled for the user.</span></span> <span data-ttu-id="a02b0-152">たとえば、必要なファイル アクセス許可が付与されていない場合、アプリケーションは **[保存]** メニュー オプションを無効にすることができます。</span><span class="sxs-lookup"><span data-stu-id="a02b0-152">For example, an application can disable the **Save** menu option if the required file permission is not granted.</span></span>

<span data-ttu-id="a02b0-153">場合によっては、すべての適切なアクセス許可をアサートしたかどうかを確認することが難しい場合があります。</span><span class="sxs-lookup"><span data-stu-id="a02b0-153">Sometimes, it is difficult to know if you have asserted all the appropriate permissions.</span></span> <span data-ttu-id="a02b0-154">たとえば、表面的には影響のないように見えるメソッドの呼び出しが、実行中のある時点でファイル システムにアクセスすることがあります。</span><span class="sxs-lookup"><span data-stu-id="a02b0-154">A method call which looks innocuous on the surface, for example, may access the file system at some point during its execution.</span></span> <span data-ttu-id="a02b0-155">必要なアクセス許可をすべて使用してアプリケーションを配置しない場合は、デスクトップでデバッグしている間は問題なくテストでき、配置のときに失敗する可能性があります。</span><span class="sxs-lookup"><span data-stu-id="a02b0-155">If you do not deploy your application with all the required permissions, it may test fine when you debug it on your desktop, but fail when deployed.</span></span> <span data-ttu-id="a02b0-156">.NET Framework 2.0 SDK と Visual Studio 2005 にはどちらも、アプリケーションに必要なアクセス許可を計算するためのツールが含まれています。これには、Visual Studio の MT.EXE コマンドラインツールとアクセス許可の計算機能がそれぞれ含まれます。</span><span class="sxs-lookup"><span data-stu-id="a02b0-156">Both the .NET Framework 2.0 SDK and Visual Studio 2005 contain tools for calculating the permissions an application needs: the MT.exe command line tool and the Calculate Permissions feature of Visual Studio, respectively.</span></span>

<span data-ttu-id="a02b0-157">次のトピックでは、Windows フォームの追加のセキュリティ機能について説明します。</span><span class="sxs-lookup"><span data-stu-id="a02b0-157">The following topics describe additional Windows Forms security features.</span></span>

|<span data-ttu-id="a02b0-158">トピック</span><span class="sxs-lookup"><span data-stu-id="a02b0-158">Topic</span></span>|<span data-ttu-id="a02b0-159">説明</span><span class="sxs-lookup"><span data-stu-id="a02b0-159">Description</span></span>|
|-----------|-----------------|
|<span data-ttu-id="a02b0-160">- [Windows フォームにおけるファイルおよびデータへのより安全なアクセス](more-secure-file-and-data-access-in-windows-forms.md)</span><span class="sxs-lookup"><span data-stu-id="a02b0-160">- [More Secure File and Data Access in Windows Forms](more-secure-file-and-data-access-in-windows-forms.md)</span></span>|<span data-ttu-id="a02b0-161">部分信頼環境でファイルとデータにアクセスする方法について説明します。</span><span class="sxs-lookup"><span data-stu-id="a02b0-161">Describes how to access files and data in a partial trust environment.</span></span>|
|<span data-ttu-id="a02b0-162">- [Windows フォームでのより安全な印刷](more-secure-printing-in-windows-forms.md)</span><span class="sxs-lookup"><span data-stu-id="a02b0-162">- [More Secure Printing in Windows Forms](more-secure-printing-in-windows-forms.md)</span></span>|<span data-ttu-id="a02b0-163">部分信頼環境で印刷機能にアクセスする方法について説明します。</span><span class="sxs-lookup"><span data-stu-id="a02b0-163">Describes how to access printing features in a partial trust environment.</span></span>|
|<span data-ttu-id="a02b0-164">- [Windows フォームのセキュリティに関するその他の考慮事項](additional-security-considerations-in-windows-forms.md)</span><span class="sxs-lookup"><span data-stu-id="a02b0-164">- [Additional Security Considerations in Windows Forms](additional-security-considerations-in-windows-forms.md)</span></span>|<span data-ttu-id="a02b0-165">部分信頼環境でのウィンドウ操作の実行、クリップボードの使用、およびアンマネージ コードへの呼び出しについて説明します。</span><span class="sxs-lookup"><span data-stu-id="a02b0-165">Describes performing window manipulation, using the Clipboard, and making calls to unmanaged code in a partial trust environment.</span></span>|

### <a name="deploying-an-application-with-the-appropriate-permissions"></a><span data-ttu-id="a02b0-166">適切なアクセス許可を持つアプリケーションの配置</span><span class="sxs-lookup"><span data-stu-id="a02b0-166">Deploying an Application with the Appropriate Permissions</span></span>

<span data-ttu-id="a02b0-167">クライアントコンピューターに Windows フォームアプリケーションを配置する最も一般的な方法は、アプリケーションで実行する必要のあるすべてのコンポーネントを記述する配置テクノロジである ClickOnce を使用することです。</span><span class="sxs-lookup"><span data-stu-id="a02b0-167">The most common means of deploying a Windows Forms application to a client computer is with ClickOnce, a deployment technology that describes all of the components your application needs to run.</span></span> <span data-ttu-id="a02b0-168">ClickOnce では、マニフェストと呼ばれる XML ファイルを使用して、アプリケーションを構成するアセンブリとファイル、およびアプリケーションに必要なアクセス許可を記述します。</span><span class="sxs-lookup"><span data-stu-id="a02b0-168">ClickOnce uses XML files called manifests to describe the assemblies and files that make up your application, and also the permissions your application requires.</span></span>

<span data-ttu-id="a02b0-169">ClickOnce には、クライアントコンピューターに対する昇格されたアクセス許可を要求するための2つのテクノロジがあります。</span><span class="sxs-lookup"><span data-stu-id="a02b0-169">ClickOnce has two technologies for requesting elevated permissions on a client computer.</span></span> <span data-ttu-id="a02b0-170">どちらのテクノロジも、Authenticode 証明書の使用に依存します。</span><span class="sxs-lookup"><span data-stu-id="a02b0-170">Both technologies rely on the use of Authenticode certificates.</span></span> <span data-ttu-id="a02b0-171">証明書は、アプリケーションが信頼できる発行元からのものであることをユーザーにある程度保証するのに役立ちます。</span><span class="sxs-lookup"><span data-stu-id="a02b0-171">The certificates help provide some assurance to your users that the application has come from a trusted source.</span></span>

<span data-ttu-id="a02b0-172">次の表では、それらのテクノロジについて説明します。</span><span class="sxs-lookup"><span data-stu-id="a02b0-172">The following table describes these technologies.</span></span>

|<span data-ttu-id="a02b0-173">昇格されたアクセス許可のテクノロジ</span><span class="sxs-lookup"><span data-stu-id="a02b0-173">Elevated permission technology</span></span>|<span data-ttu-id="a02b0-174">説明</span><span class="sxs-lookup"><span data-stu-id="a02b0-174">Description</span></span>|
|------------------------------------|-----------------|
|<span data-ttu-id="a02b0-175">アクセス許可の昇格</span><span class="sxs-lookup"><span data-stu-id="a02b0-175">Permission Elevation</span></span>|<span data-ttu-id="a02b0-176">アプリケーションを最初に実行するときにセキュリティ ダイアログ ボックスをユーザーに表示します。</span><span class="sxs-lookup"><span data-stu-id="a02b0-176">Prompts the user with a security dialog box the first time your application runs.</span></span> <span data-ttu-id="a02b0-177">**[アクセス許可の昇格]** ダイアログ ボックスは、アプリケーションの発行者についてユーザーに通知するので、ユーザーは十分な情報に基づいて追加の信頼を付与するかどうかを決定できます。</span><span class="sxs-lookup"><span data-stu-id="a02b0-177">The **Permission Elevation** dialog box informs the user about who published the application, so that the user can make an informed decision about whether to grant it additional trust</span></span>|
|<span data-ttu-id="a02b0-178">信頼されたアプリケーションの配置</span><span class="sxs-lookup"><span data-stu-id="a02b0-178">Trusted Application Deployment</span></span>|<span data-ttu-id="a02b0-179">システム管理者がクライアント コンピューターで、発行元の Authenticode 証明書のインストールを 1 回実行する必要があります。</span><span class="sxs-lookup"><span data-stu-id="a02b0-179">Involves a system administrator performing a one-time installation of a publisher's Authenticode certificate on a client computer.</span></span> <span data-ttu-id="a02b0-180">その時点から、その証明書で署名されたアプリケーションは信頼済みとみなされ、追加メッセージを表示せずに、ローカル コンピューター上で完全信頼で実行できます。</span><span class="sxs-lookup"><span data-stu-id="a02b0-180">From that point on, any applications signed with the certificate are regarded as trusted, and can run at full trust on the local computer without additional prompting.</span></span>|

<span data-ttu-id="a02b0-181">どのテクノロジを選択するかは、配置環境に応じて異なります。</span><span class="sxs-lookup"><span data-stu-id="a02b0-181">Which technology you choose will depend on your deployment environment.</span></span> <span data-ttu-id="a02b0-182">詳細については、「[ClickOnce 配置ストラテジの選択](/visualstudio/deployment/choosing-a-clickonce-deployment-strategy)」を参照してください。</span><span class="sxs-lookup"><span data-stu-id="a02b0-182">For more information, see [Choosing a ClickOnce Deployment Strategy](/visualstudio/deployment/choosing-a-clickonce-deployment-strategy).</span></span>

<span data-ttu-id="a02b0-183">既定では、Visual Studio または .NET Framework SDK ツール (Mage.exe および Mageui.exe) のいずれかを使用して配置された ClickOnce アプリケーションは、完全に信頼されているクライアントコンピューターで実行するように構成されています。</span><span class="sxs-lookup"><span data-stu-id="a02b0-183">By default, ClickOnce applications deployed using either Visual Studio or the .NET Framework SDK tools (Mage.exe and MageUI.exe) are configured to run on a client computer that has Full Trust.</span></span> <span data-ttu-id="a02b0-184">部分信頼を使用して、またはいくつか追加のアクセス許可のみを使用して、アプリケーションを配置している場合、この既定を変更する必要があります。</span><span class="sxs-lookup"><span data-stu-id="a02b0-184">If you are deploying your application by using partial trust or by using only some additional permissions, you will have to change this default.</span></span> <span data-ttu-id="a02b0-185">これは、配置を構成するときに、Visual Studio または .NET Framework SDK ツールの Mageui.exe を使用して実行できます。</span><span class="sxs-lookup"><span data-stu-id="a02b0-185">You can do this with either Visual Studio or the .NET Framework SDK tool MageUI.exe when you configure your deployment.</span></span> <span data-ttu-id="a02b0-186">Mageui.exe の使用方法の詳細については、「 [チュートリアル:ClickOnce アプリケーション](/visualstudio/deployment/walkthrough-manually-deploying-a-clickonce-application)を手動で配置します。</span><span class="sxs-lookup"><span data-stu-id="a02b0-186">For more information about how to use MageUI.exe, see [Walkthrough: Manually deploying a ClickOnce application](/visualstudio/deployment/walkthrough-manually-deploying-a-clickonce-application).</span></span>  <span data-ttu-id="a02b0-187">「 [方法:ClickOnce アプリケーション](https://docs.microsoft.com/previous-versions/visualstudio/visual-studio-2012/hafybdaa(v=vs.110))のカスタムアクセス許可を設定[するか、次の方法を実行します。ClickOnce アプリケーション](/visualstudio/deployment/how-to-set-custom-permissions-for-a-clickonce-application)のカスタムアクセス許可を設定します。</span><span class="sxs-lookup"><span data-stu-id="a02b0-187">Also see [How to: Set Custom Permissions for a ClickOnce Application](https://docs.microsoft.com/previous-versions/visualstudio/visual-studio-2012/hafybdaa(v=vs.110)) or [How to: Set Custom Permissions for a ClickOnce Application](/visualstudio/deployment/how-to-set-custom-permissions-for-a-clickonce-application).</span></span>

<span data-ttu-id="a02b0-188">ClickOnce とアクセス許可の昇格のセキュリティ面の詳細については、「 [Clickonce アプリケーション](/visualstudio/deployment/securing-clickonce-applications)のセキュリティ保護」を参照してください。</span><span class="sxs-lookup"><span data-stu-id="a02b0-188">For more information about the security aspects of ClickOnce and Permission Elevation, see [Securing ClickOnce Applications](/visualstudio/deployment/securing-clickonce-applications).</span></span> <span data-ttu-id="a02b0-189">信頼されたアプリケーションの配置の詳細については、「[信頼されたアプリケーションの配置の概要](/visualstudio/deployment/trusted-application-deployment-overview)」を参照してください。</span><span class="sxs-lookup"><span data-stu-id="a02b0-189">For more information about Trusted Application Deployment, see [Trusted Application Deployment Overview](/visualstudio/deployment/trusted-application-deployment-overview).</span></span>

### <a name="testing-the-application"></a><span data-ttu-id="a02b0-190">アプリケーションのテスト</span><span class="sxs-lookup"><span data-stu-id="a02b0-190">Testing the Application</span></span>

<span data-ttu-id="a02b0-191">Visual Studio を使用して Windows フォームアプリケーションを配置した場合は、開発環境から、部分信頼または制限されたアクセス許可セットでのデバッグを有効にすることができます。</span><span class="sxs-lookup"><span data-stu-id="a02b0-191">If you have deployed your Windows Forms application by using Visual Studio, you can enable debugging in partial trust or a restricted permission set from the development environment.</span></span>  <span data-ttu-id="a02b0-192">「 [方法:アクセス許可が制限された ClickOnce アプリケーションをデバッグする](/visualstudio/deployment/how-to-debug-a-clickonce-application-with-restricted-permissions)」を参照してください。</span><span class="sxs-lookup"><span data-stu-id="a02b0-192">Also see [How to: Debug a ClickOnce Application with Restricted Permissions](/visualstudio/deployment/how-to-debug-a-clickonce-application-with-restricted-permissions).</span></span>

## <a name="see-also"></a><span data-ttu-id="a02b0-193">関連項目</span><span class="sxs-lookup"><span data-stu-id="a02b0-193">See also</span></span>

- [<span data-ttu-id="a02b0-194">Windows フォームのセキュリティ</span><span class="sxs-lookup"><span data-stu-id="a02b0-194">Windows Forms Security</span></span>](windows-forms-security.md)
- [<span data-ttu-id="a02b0-195">コード アクセス セキュリティの基礎</span><span class="sxs-lookup"><span data-stu-id="a02b0-195">Code Access Security Basics</span></span>](../misc/code-access-security-basics.md)
- [<span data-ttu-id="a02b0-196">ClickOnce のセキュリティと配置</span><span class="sxs-lookup"><span data-stu-id="a02b0-196">ClickOnce Security and Deployment</span></span>](/visualstudio/deployment/clickonce-security-and-deployment)
- [<span data-ttu-id="a02b0-197">信頼されたアプリケーションの配置の概要</span><span class="sxs-lookup"><span data-stu-id="a02b0-197">Trusted Application Deployment Overview</span></span>](/visualstudio/deployment/trusted-application-deployment-overview)
- [<span data-ttu-id="a02b0-198">Mage.exe (マニフェストの生成および編集ツール)</span><span class="sxs-lookup"><span data-stu-id="a02b0-198">Mage.exe (Manifest Generation and Editing Tool)</span></span>](../tools/mage-exe-manifest-generation-and-editing-tool.md)
- [<span data-ttu-id="a02b0-199">MageUI.exe (マニフェスト生成および編集ツールのグラフィカル クライアント)</span><span class="sxs-lookup"><span data-stu-id="a02b0-199">MageUI.exe (Manifest Generation and Editing Tool, Graphical Client)</span></span>](../tools/mageui-exe-manifest-generation-and-editing-tool-graphical-client.md)
