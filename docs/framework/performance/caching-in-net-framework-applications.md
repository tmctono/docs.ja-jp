---
title: .NET Framework アプリケーションでのキャッシュ
description: .NET アプリケーションでキャッシュを使用します。 データのキャッシュ、ASP.NET アプリケーションまたは WCF REST サービスでのキャッシュ、.NET でのキャッシュの拡張について説明します。
ms.date: 03/30/2017
helpviewer_keywords:
- ASP.NET caching
- caching [.NET Framework]
- caching [ASP.NET]
ms.assetid: c4b47ee0-4b82-4124-9bce-818088385e34
ms.openlocfilehash: 72cf7113b3fc15abd116d3a20b55f4593b172428
ms.sourcegitcommit: 27a15a55019f6b5f2733961738babe94aec0def3
ms.translationtype: MT
ms.contentlocale: ja-JP
ms.lasthandoff: 09/15/2020
ms.locfileid: "90553832"
---
# <a name="caching-in-net-framework-applications"></a><span data-ttu-id="f9120-104">.NET Framework アプリケーションでのキャッシュ</span><span class="sxs-lookup"><span data-stu-id="f9120-104">Caching in .NET Framework Applications</span></span>
<span data-ttu-id="f9120-105">キャッシュを使用すると、メモリにデータを格納して高速にアクセスできます。</span><span class="sxs-lookup"><span data-stu-id="f9120-105">Caching enables you to store data in memory for rapid access.</span></span> <span data-ttu-id="f9120-106">アプリケーションからそのデータに再アクセスするときに、元のソースからではなく、キャッシュからデータを取得できます。</span><span class="sxs-lookup"><span data-stu-id="f9120-106">When the data is accessed again, applications can get the data from the cache instead of retrieving it from the original source.</span></span> <span data-ttu-id="f9120-107">そのため、パフォーマンスとスケーラビリティが向上します。</span><span class="sxs-lookup"><span data-stu-id="f9120-107">This can improve performance and scalability.</span></span> <span data-ttu-id="f9120-108">また、データ ソースが一時的に使用できない場合でも、キャッシュのデータを使用できます。</span><span class="sxs-lookup"><span data-stu-id="f9120-108">In addition, caching makes data available when the data source is temporarily unavailable.</span></span>  
  
 <span data-ttu-id="f9120-109">.NET Framework には、Windows クライアントおよびサーバー アプリケーション (ASP.NET など) のパフォーマンスとスケーラビリティの改善に使用できるキャッシュ機能があります。</span><span class="sxs-lookup"><span data-stu-id="f9120-109">The .NET Framework provides caching functionality that you can use to improve the performance and scalability of both Windows client and server applications, including ASP.NET.</span></span>  
  
> [!NOTE]
> <span data-ttu-id="f9120-110">.NET Framework 3.5 以前のバージョンでは、ASP.NET によって、名前空間にメモリ内キャッシュが実装されていました <xref:System.Web.Caching> 。</span><span class="sxs-lookup"><span data-stu-id="f9120-110">In the .NET Framework 3.5 and earlier versions, ASP.NET provided an in-memory cache implementation in the <xref:System.Web.Caching> namespace.</span></span> <span data-ttu-id="f9120-111">.NET Framework の以前のバージョンでは、キャッシュは <xref:System.Web> 名前空間でのみ使用可能だったため、ASP.NET クラスへの依存が必要でした。</span><span class="sxs-lookup"><span data-stu-id="f9120-111">In previous versions of the .NET Framework, caching was available only in the <xref:System.Web> namespace and therefore required a dependency on ASP.NET classes.</span></span> <span data-ttu-id="f9120-112">.NET Framework 4 では、Web アプリケーションと非 Web アプリケーション両方のために設計された API が <xref:System.Runtime.Caching> 名前空間に含まれています。</span><span class="sxs-lookup"><span data-stu-id="f9120-112">In the .NET Framework 4, the <xref:System.Runtime.Caching> namespace contains APIs that are designed for both Web and non-Web applications.</span></span>  
  
## <a name="caching-data"></a><span data-ttu-id="f9120-113">キャッシュされたデータ</span><span class="sxs-lookup"><span data-stu-id="f9120-113">Caching Data</span></span>  
 <span data-ttu-id="f9120-114">情報をキャッシュするには、<xref:System.Runtime.Caching> 名前空間のクラスを使用します。</span><span class="sxs-lookup"><span data-stu-id="f9120-114">You can cache information by using classes in the <xref:System.Runtime.Caching> namespace.</span></span> <span data-ttu-id="f9120-115">この名前空間のキャッシュ クラスには、次の機能があります。</span><span class="sxs-lookup"><span data-stu-id="f9120-115">The caching classes in this namespace provide the following features:</span></span>  
  
- <span data-ttu-id="f9120-116">カスタムのキャッシュ実装を作成するための基礎として機能する抽象型。</span><span class="sxs-lookup"><span data-stu-id="f9120-116">Abstract types that provide the foundation for creating custom cache implementations.</span></span>  
  
- <span data-ttu-id="f9120-117">具体的なメモリ内オブジェクト キャッシュ実装。</span><span class="sxs-lookup"><span data-stu-id="f9120-117">A concrete in-memory object cache implementation.</span></span>  
  
 <span data-ttu-id="f9120-118">抽象的な基本キャッシュ クラス (<xref:System.Runtime.Caching.ObjectCache>) では、次のキャッシュ タスクを定義します。</span><span class="sxs-lookup"><span data-stu-id="f9120-118">The abstract base caching class (<xref:System.Runtime.Caching.ObjectCache>) defines the following caching tasks:</span></span>  
  
- <span data-ttu-id="f9120-119">キャッシュ エントリの作成と管理</span><span class="sxs-lookup"><span data-stu-id="f9120-119">Creating and managing cache entries.</span></span>  
  
- <span data-ttu-id="f9120-120">有効期限と削除の情報を指定します。</span><span class="sxs-lookup"><span data-stu-id="f9120-120">Specifying expiration and eviction information.</span></span>  
  
- <span data-ttu-id="f9120-121">キャッシュ エントリの変化に応答して発生するイベントをトリガーします。</span><span class="sxs-lookup"><span data-stu-id="f9120-121">Triggering events that are raised in response to changes in cache entries.</span></span>  
  
 <span data-ttu-id="f9120-122"><xref:System.Runtime.Caching.MemoryCache> クラスは、<xref:System.Runtime.Caching.ObjectCache> クラスのメモリ内オブジェクト キャッシュ実装です。</span><span class="sxs-lookup"><span data-stu-id="f9120-122">The <xref:System.Runtime.Caching.MemoryCache> class is an in-memory object cache implementation of the <xref:System.Runtime.Caching.ObjectCache> class.</span></span> <span data-ttu-id="f9120-123">ほとんどのキャッシュ タスクに <xref:System.Runtime.Caching.MemoryCache> クラスを使用できます。</span><span class="sxs-lookup"><span data-stu-id="f9120-123">You can use the <xref:System.Runtime.Caching.MemoryCache> class for most caching tasks.</span></span>  
  
> [!NOTE]
> <span data-ttu-id="f9120-124"><xref:System.Runtime.Caching.MemoryCache> クラスは、<xref:System.Web.Caching> 名前空間に定義されている ASP.NET キャッシュ オブジェクトに対してモデル化されています。</span><span class="sxs-lookup"><span data-stu-id="f9120-124">The <xref:System.Runtime.Caching.MemoryCache> class is modeled on the ASP.NET cache object that is defined in the <xref:System.Web.Caching> namespace.</span></span> <span data-ttu-id="f9120-125">そのため、内部のキャッシュ ロジックは、旧バージョンの ASP.NET で提供されていたロジックと似ています。</span><span class="sxs-lookup"><span data-stu-id="f9120-125">Therefore, the internal caching logic similar to the logic that was provided in earlier versions of ASP.NET.</span></span>  
  
 <span data-ttu-id="f9120-126">WPF アプリケーションでキャッシュに使用する方法の例については、「[Walkthrough: Caching Application Data in a WPF Application](/dotnet/desktop/wpf/advanced/walkthrough-caching-application-data-in-a-wpf-application)」(チュートリアル: WPF アプリケーション内のアプリケーション データのキャッシュ) を参照してください。</span><span class="sxs-lookup"><span data-stu-id="f9120-126">For an example of how to use to caching in a WPF application, see [Walkthrough: Caching Application Data in a WPF Application](/dotnet/desktop/wpf/advanced/walkthrough-caching-application-data-in-a-wpf-application).</span></span>  
  
## <a name="caching-in-aspnet-applications"></a><span data-ttu-id="f9120-127">ASP.NET アプリケーションでのキャッシュ</span><span class="sxs-lookup"><span data-stu-id="f9120-127">Caching in ASP.NET Applications</span></span>  
 <span data-ttu-id="f9120-128"><xref:System.Runtime.Caching> 名前空間のキャッシュ クラスには、ASP.NET のデータをキャッシュするための機能があります。</span><span class="sxs-lookup"><span data-stu-id="f9120-128">The caching classes in the <xref:System.Runtime.Caching> namespace provide functionality for caching data in ASP.NET.</span></span>  
  
> [!NOTE]
> <span data-ttu-id="f9120-129">アプリケーションが3.5 またはそれ以前の .NET Framework を対象としている場合は、名前空間で定義されているキャッシュクラスを使用する必要があり <xref:System.Web.Caching> ます。</span><span class="sxs-lookup"><span data-stu-id="f9120-129">If your application targets the .NET Framework 3.5 or earlier, you must use the caching classes that are defined in the <xref:System.Web.Caching> namespace.</span></span> <span data-ttu-id="f9120-130">詳細については、「[ASP.NET のキャッシュの概要](/previous-versions/aspnet/ms178597(v=vs.100))」を参照してください。</span><span class="sxs-lookup"><span data-stu-id="f9120-130">For more information, see [ASP.NET Caching Overview](/previous-versions/aspnet/ms178597(v=vs.100)).</span></span>  
  
> [!NOTE]
> <span data-ttu-id="f9120-131">新しいアプリケーションを開発する場合は、<xref:System.Runtime.Caching.MemoryCache> クラスを使用することをお勧めします。</span><span class="sxs-lookup"><span data-stu-id="f9120-131">When you develop new applications, we recommend that you use the <xref:System.Runtime.Caching.MemoryCache> class.</span></span> <span data-ttu-id="f9120-132"><xref:System.Runtime.Caching> 名前空間に用意されている API は、<xref:System.Web.Caching.Cache> 名前空間に用意されている API と似ています。</span><span class="sxs-lookup"><span data-stu-id="f9120-132">The API that is provided in the <xref:System.Runtime.Caching> namespace is like the API that is provided in the <xref:System.Web.Caching.Cache> namespace.</span></span> <span data-ttu-id="f9120-133">そのため、旧バージョンの ASP.NET でキャッシュを使用していた場合は、なじみやすい API です。</span><span class="sxs-lookup"><span data-stu-id="f9120-133">Therefore, the API will be familiar if you used caching in earlier versions of ASP.NET.</span></span> <span data-ttu-id="f9120-134">ASP.NET アプリケーションでキャッシュを使用する方法の例については、「[チュートリアル: ASP.NET 内のアプリケーション データのキャッシュ](/previous-versions/ff477235(v=vs.100))」を参照してください。</span><span class="sxs-lookup"><span data-stu-id="f9120-134">For an example of how to use caching in ASP.NET applications, see [Walkthrough: Caching Application Data in ASP.NET](/previous-versions/ff477235(v=vs.100)).</span></span>  
  
### <a name="output-caching"></a><span data-ttu-id="f9120-135">出力キャッシュ</span><span class="sxs-lookup"><span data-stu-id="f9120-135">Output Caching</span></span>  
 <span data-ttu-id="f9120-136">アプリケーション データを手動でキャッシュするには、ASP.NET で <xref:System.Runtime.Caching.MemoryCache> クラスを使用します。</span><span class="sxs-lookup"><span data-stu-id="f9120-136">To manually cache application data, you can use the <xref:System.Runtime.Caching.MemoryCache> class in ASP.NET.</span></span> <span data-ttu-id="f9120-137">ASP.NET は出力キャッシュもサポートしており、ページ、コントロール、および HTTP 応答の生成された出力をメモリに格納します。</span><span class="sxs-lookup"><span data-stu-id="f9120-137">ASP.NET also supports output caching, which stores the generated output of pages, controls, and HTTP responses in memory.</span></span> <span data-ttu-id="f9120-138">出力キャッシュを構成するには、ASP.NET Web ページで宣言を使用するか、Web.config ファイルの設定を使用します。</span><span class="sxs-lookup"><span data-stu-id="f9120-138">You can configure output caching declaratively in an ASP.NET Web page or by using settings in the Web.config file.</span></span> <span data-ttu-id="f9120-139">詳細については、「[outputCache Element for caching (ASP.NET Settings Schema)](/previous-versions/dotnet/netframework-4.0/ms228124(v=vs.100))」(caching の outputCache 要素 (ASP.NET 設定スキーマ)) を参照してください。</span><span class="sxs-lookup"><span data-stu-id="f9120-139">For more information, see [outputCache Element for caching (ASP.NET Settings Schema)](/previous-versions/dotnet/netframework-4.0/ms228124(v=vs.100)).</span></span>  
  
 <span data-ttu-id="f9120-140">ASP.NET では、カスタム出力キャッシュ プロバイダーを作成して、出力キャッシュを拡張できます。</span><span class="sxs-lookup"><span data-stu-id="f9120-140">ASP.NET lets you extend output caching by creating custom output-cache providers.</span></span> <span data-ttu-id="f9120-141">カスタム プロバイダーを使用すると、キャッシュされたコンテンツを、ディスク、クラウド記憶域、分散キャッシュ エンジンなど、他の記憶域デバイスに格納できます。</span><span class="sxs-lookup"><span data-stu-id="f9120-141">By using custom providers, you can store cached content using other storage devices such as disks, cloud storage, and distributed cache engines.</span></span> <span data-ttu-id="f9120-142">カスタム出力キャッシュ プロバイダーを作成するには、<xref:System.Web.Caching.OutputCacheProvider> クラスから派生したクラスを作成し、そのカスタム出力キャッシュ プロバイダーを使用するようにアプリケーションを構成します。</span><span class="sxs-lookup"><span data-stu-id="f9120-142">To create a custom output cache provider, you create a class that derives from the <xref:System.Web.Caching.OutputCacheProvider> class and configure the application to use the custom output cache provider.</span></span>  
  
## <a name="caching-in-wcf-rest-services"></a><span data-ttu-id="f9120-143">WCF REST サービスでのキャッシュ</span><span class="sxs-lookup"><span data-stu-id="f9120-143">Caching in WCF REST Services</span></span>  
 <span data-ttu-id="f9120-144">WCF REST サービスで .NET Framework を使用すると、ASP.NET で使用可能な宣言型の出力キャッシュを利用できます。</span><span class="sxs-lookup"><span data-stu-id="f9120-144">For WCF REST services, the .NET Framework enables you to take advantage of the declarative output caching that is available in ASP.NET.</span></span> <span data-ttu-id="f9120-145">このため、WCF REST サービス操作からの応答をキャッシュできます。</span><span class="sxs-lookup"><span data-stu-id="f9120-145">This enables you to cache responses from your WCF REST service operations.</span></span> <span data-ttu-id="f9120-146">キャッシュ用に構成されているサービスに対してユーザーが HTTP GET 要求を送信すると、ASP.NET は、キャッシュされた応答を送り返し、サービス メソッドは呼び出されません。</span><span class="sxs-lookup"><span data-stu-id="f9120-146">When a user sends an HTTP GET request to a service that is configured for caching, ASP.NET sends back the cached response, and the service method is not called.</span></span> <span data-ttu-id="f9120-147">キャッシュの有効期限が切れると、ユーザーが次回に HTTP GET 要求を送信したときに、サービス メソッドが呼び出され、応答が再度キャッシュされます。</span><span class="sxs-lookup"><span data-stu-id="f9120-147">After the cache expires, the next time that a user sends an HTTP GET request, your service method is called and the response is again cached.</span></span>  
  
 <span data-ttu-id="f9120-148">.NET Framework では、条件付き HTTP GET キャッシュを実装することもできます。</span><span class="sxs-lookup"><span data-stu-id="f9120-148">The .NET Framework also enables you to implement conditional HTTP GET caching.</span></span> <span data-ttu-id="f9120-149">REST シナリオでは、条件付き HTTP GET 要求がサービスで使用されて、[HTTP の仕様](https://www.w3.org/Protocols/rfc2616/rfc2616.html)で説明されているように、インテリジェントな HTTP キャッシュが実装されることがよくあります。</span><span class="sxs-lookup"><span data-stu-id="f9120-149">In REST scenarios, a conditional HTTP GET request is often used by services to implement intelligent HTTP caching as described in the [HTTP Specification](https://www.w3.org/Protocols/rfc2616/rfc2616.html).</span></span> <span data-ttu-id="f9120-150">詳細については、「[WCF WEB HTTP サービスのキャッシュ サポート](../wcf/feature-details/caching-support-for-wcf-web-http-services.md)」を参照してください。</span><span class="sxs-lookup"><span data-stu-id="f9120-150">For more information, see [Caching Support for WCF Web HTTP Services](../wcf/feature-details/caching-support-for-wcf-web-http-services.md).</span></span>  
  
## <a name="extending-caching-in-the-net-framework"></a><span data-ttu-id="f9120-151">.NET Framework のキャッシュを拡張する</span><span class="sxs-lookup"><span data-stu-id="f9120-151">Extending Caching in the .NET Framework</span></span>  
 <span data-ttu-id="f9120-152">.NET Framework のキャッシュは拡張できるように設計されています。</span><span class="sxs-lookup"><span data-stu-id="f9120-152">Caching in the .NET Framework is designed to be extensible.</span></span> <span data-ttu-id="f9120-153"><xref:System.Runtime.Caching.ObjectCache> クラスを使用すると、カスタム キャッシュ実装を作成できます。</span><span class="sxs-lookup"><span data-stu-id="f9120-153">The <xref:System.Runtime.Caching.ObjectCache> class enables you to create a custom cache implementation.</span></span> <span data-ttu-id="f9120-154">このクラスには、Windows フォーム、Windows Presentation Foundation(WPF)、Windows Communication Foundation (WCF) など、すべてのマネージド アプリケーションから使用できるメンバーがあります。</span><span class="sxs-lookup"><span data-stu-id="f9120-154">This class provides members that are available to all managed applications, including Windows Forms, Windows Presentation Foundation (WPF), and Windows Communications Foundation (WCF).</span></span> <span data-ttu-id="f9120-155">その目的は、異なる記憶域メカニズムを使用するキャッシュ クラスを作成するためや、キャッシュ操作をより細かく制御する場合などです。</span><span class="sxs-lookup"><span data-stu-id="f9120-155">You might do this in order to create a cache class that uses a different storage mechanism, or if you want granular control over cache operations.</span></span>  
  
 <span data-ttu-id="f9120-156">キャッシュを拡張するには、次の方法があります。</span><span class="sxs-lookup"><span data-stu-id="f9120-156">To extend caching you can do the following:</span></span>  
  
- <span data-ttu-id="f9120-157"><xref:System.Runtime.Caching.ObjectCache> クラスから派生したカスタム クラスを作成し、派生クラスでカスタム キャッシュ実装を提供します。</span><span class="sxs-lookup"><span data-stu-id="f9120-157">Create a custom class that derives from the <xref:System.Runtime.Caching.ObjectCache> class and then provide a custom cache implementation in the derived class.</span></span>  
  
- <span data-ttu-id="f9120-158"><xref:System.Runtime.Caching.MemoryCache> クラスから派生したクラスを作成し、派生クラスをカスタマイズまたは拡張します。</span><span class="sxs-lookup"><span data-stu-id="f9120-158">Create a class that derives from <xref:System.Runtime.Caching.MemoryCache> class and customize or extend the derived class.</span></span> <span data-ttu-id="f9120-159">この実行方法の例については、「[Caching Application Data by Using Multiple Cache Objects in an ASP.NET Application](/archive/blogs/aspnetue/caching-application-data-by-using-multiple-cache-objects-in-an-asp-net-application)」(ASP.NET アプリケーションで複数のキャッシュ オブジェクトを使用してアプリケーション データをキャッシュする) を参照してください。</span><span class="sxs-lookup"><span data-stu-id="f9120-159">For an example of how to do this, see [Caching Application Data by Using Multiple Cache Objects in an ASP.NET Application](/archive/blogs/aspnetue/caching-application-data-by-using-multiple-cache-objects-in-an-asp-net-application).</span></span>  
  
- <span data-ttu-id="f9120-160"><xref:System.Web.Caching.OutputCacheProvider> クラスから派生したクラスを作成し、そのカスタム出力キャッシュ プロバイダーを使用するようにアプリケーションを構成します。</span><span class="sxs-lookup"><span data-stu-id="f9120-160">Create a class that derives from the <xref:System.Web.Caching.OutputCacheProvider> class and configure the application to use the custom output cache provider.</span></span>  
  
 <span data-ttu-id="f9120-161">詳細については、Scott Guthrie のブログのエントリ「[Extensible Output Caching with ASP.NET 4 (VS 2010 and .NET 4.0 Series)](https://weblogs.asp.net/scottgu/extensible-output-caching-with-asp-net-4-vs-2010-and-net-4-0-series)」(ASP.NET 4 を使用した拡張可能な出力キャッシュ (VS 2010 および .NET 4.0 シリーズ)) を参照してください。</span><span class="sxs-lookup"><span data-stu-id="f9120-161">For more information, see the entry [Extensible Output Caching with ASP.NET 4 (VS 2010 and .NET 4.0 Series)](https://weblogs.asp.net/scottgu/extensible-output-caching-with-asp-net-4-vs-2010-and-net-4-0-series) on Scott Guthrie's blog.</span></span>  
  
## <a name="see-also"></a><span data-ttu-id="f9120-162">関連項目</span><span class="sxs-lookup"><span data-stu-id="f9120-162">See also</span></span>

- <xref:System.Runtime.Caching.ObjectCache>
- <xref:System.Runtime.Caching.MemoryCache>
- [<span data-ttu-id="f9120-163">チュートリアル: WPF アプリケーション内のアプリケーション データのキャッシュ</span><span class="sxs-lookup"><span data-stu-id="f9120-163">Walkthrough: Caching Application Data in a WPF Application</span></span>](/dotnet/desktop/wpf/advanced/walkthrough-caching-application-data-in-a-wpf-application)
- <span data-ttu-id="f9120-164">[チュートリアル: ASP.NET 内のアプリケーション データのキャッシュ](/previous-versions/ff477235(v=vs.100))</span><span class="sxs-lookup"><span data-stu-id="f9120-164">[Walkthrough: Caching Application Data in ASP.NET](/previous-versions/ff477235(v=vs.100))</span></span>
