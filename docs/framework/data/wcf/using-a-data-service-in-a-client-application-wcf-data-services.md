---
title: クライアント アプリケーションでのデータ サービスの使用 (WCF Data Services)
ms.date: 03/30/2017
helpviewer_keywords:
- WCF Data Services, client library
- WCF Data Services, getting started
ms.assetid: 90872d0c-e989-4490-b3e9-54afb10d33d4
ms.openlocfilehash: b921e78c1b3d3d90d9ac8b4a459df496cf6d14dd
ms.sourcegitcommit: 5b475c1855b32cf78d2d1bbb4295e4c236f39464
ms.translationtype: HT
ms.contentlocale: ja-JP
ms.lasthandoff: 09/24/2020
ms.locfileid: "91180583"
---
# <a name="using-a-data-service-in-a-client-application-wcf-data-services"></a><span data-ttu-id="70e2c-102">クライアント アプリケーションでのデータ サービスの使用 (WCF Data Services)</span><span class="sxs-lookup"><span data-stu-id="70e2c-102">Using a Data Service in a Client Application (WCF Data Services)</span></span>

<span data-ttu-id="70e2c-103">Web ブラウザーに URI を入力することで、Open Data Protocol (OData) フィードを公開するサービスにアクセスできます。</span><span class="sxs-lookup"><span data-stu-id="70e2c-103">You can access a service that exposes an Open Data Protocol (OData) feed by supplying a URI to a Web browser.</span></span> <span data-ttu-id="70e2c-104">URI はリソースのアドレスを提供し、要求メッセージがこれらのアドレスに送信されてリソースが表す基になるデータのアクセスまたは変更を行います。</span><span class="sxs-lookup"><span data-stu-id="70e2c-104">The URI provides the address of a resource, and request messages are sent to these addresses to access or change the underlying data that the resource represents.</span></span> <span data-ttu-id="70e2c-105">ブラウザーは HTTP GET コマンドを発行して、要求されたリソースを OData フィードとして返します。</span><span class="sxs-lookup"><span data-stu-id="70e2c-105">The browser issues an HTTP GET command and returns the requested resource as an OData feed.</span></span> <span data-ttu-id="70e2c-106">詳細については、「[Web ブラウザーからサービスへのアクセス](accessing-the-service-from-a-web-browser-wcf-data-services-quickstart.md)」を参照してください。</span><span class="sxs-lookup"><span data-stu-id="70e2c-106">For more information, see [Accessing the Service from a Web Browser](accessing-the-service-from-a-web-browser-wcf-data-services-quickstart.md).</span></span>  
  
 <span data-ttu-id="70e2c-107">Web ブラウザーは OData サービスが予期されたデータを返すかどうかをテストするために便利ですが、データの作成、更新、および削除も行うことができる運用 OData サービスには、一般的にアプリケーション コードや Web ページのスクリプト言語を使用してアクセスします。</span><span class="sxs-lookup"><span data-stu-id="70e2c-107">Although a Web browser may be useful for testing that an OData service returns the expected data, production OData services that enable you to also create, update, and delete data are generally accessed by application code or scripting languages in a Web page.</span></span> <span data-ttu-id="70e2c-108">このトピックでは、クライアント アプリケーションから OData フィードにアクセスする方法の概要について説明します。</span><span class="sxs-lookup"><span data-stu-id="70e2c-108">This topic provides an overview of how to access OData feeds from a client application.</span></span>  
  
## <a name="accessing-and-changing-data-using-rest-semantics"></a><span data-ttu-id="70e2c-109">REST セマンティクスを使用したデータのアクセスおよび変更</span><span class="sxs-lookup"><span data-stu-id="70e2c-109">Accessing and Changing Data Using REST Semantics</span></span>  

 <span data-ttu-id="70e2c-110">OData は、OData フィードを公開するサービスと OData フィードを使用するアプリケーションの間の相互運用性を保証するのに役立ちます。</span><span class="sxs-lookup"><span data-stu-id="70e2c-110">OData helps guarantee interoperability between services that expose OData feeds and applications that consume OData feeds.</span></span> <span data-ttu-id="70e2c-111">アプリケーションでは、特定の HTTP アクションの要求メッセージ、およびアクションを実行するエンティティ リソースのアドレスを指定する URI を送信して、OData ベースのサービス内のデータのアクセスおよび変更を行います。</span><span class="sxs-lookup"><span data-stu-id="70e2c-111">Applications access and change data in an OData-based service by sending request messages of a specific HTTP action and with a URI that addresses an entity resource against which the action should be performed.</span></span> <span data-ttu-id="70e2c-112">エンティティ データを指定する必要がある場合、メッセージの本文に、エンコードされたペイロードとして明示的に指定します。</span><span class="sxs-lookup"><span data-stu-id="70e2c-112">When entity data must be supplied, it is supplied as a specifically encoded payload in the body of the message.</span></span>  
  
### <a name="http-actions"></a><span data-ttu-id="70e2c-113">HTTP アクション</span><span class="sxs-lookup"><span data-stu-id="70e2c-113">HTTP Actions</span></span>  

 <span data-ttu-id="70e2c-114">OData では、アドレス指定されたリソースが表すエンティティ データに対する操作の作成、読み取り、更新、および削除を実行する次の HTTP アクションがサポートされています。</span><span class="sxs-lookup"><span data-stu-id="70e2c-114">OData supports the following HTTP actions to perform create, read, update, and delete operations on the entity data that the addressed resource represents:</span></span>  
  
- <span data-ttu-id="70e2c-115">**HTTP GET** - これは、ブラウザーからリソースにアクセスするときの既定のアクションです。</span><span class="sxs-lookup"><span data-stu-id="70e2c-115">**HTTP GET** - This is the default action when a resource is accessed from a browser.</span></span> <span data-ttu-id="70e2c-116">要求メッセージではペイロードは指定されず、要求されたデータを含むペイロードを含む応答メソッドが返されます。</span><span class="sxs-lookup"><span data-stu-id="70e2c-116">No payload is supplied in the request message, and a response method with a payload that contains the requested data is returned.</span></span>  
  
- <span data-ttu-id="70e2c-117">**HTTP POST** - 新しいエンティティ データを指定されたリソースに挿入します。</span><span class="sxs-lookup"><span data-stu-id="70e2c-117">**HTTP POST** - Inserts new entity data into the supplied resource.</span></span> <span data-ttu-id="70e2c-118">挿入するデータは、要求メッセージのペイロードで指定されます。</span><span class="sxs-lookup"><span data-stu-id="70e2c-118">Data to be inserted is supplied in the payload of the request message.</span></span> <span data-ttu-id="70e2c-119">応答メッセージのペイロードには、新しく作成されたエンティティのデータが含まれます。</span><span class="sxs-lookup"><span data-stu-id="70e2c-119">The payload of the response message contains the data for the newly created entity.</span></span> <span data-ttu-id="70e2c-120">これには自動生成されたキー値が含まれます。</span><span class="sxs-lookup"><span data-stu-id="70e2c-120">This includes any autogenerated key values.</span></span> <span data-ttu-id="70e2c-121">ヘッダーには、新しいエンティティ リソースのアドレスを指定する URI も含まれます。</span><span class="sxs-lookup"><span data-stu-id="70e2c-121">The header also contains the URI that addresses the new entity resource.</span></span>  
  
- <span data-ttu-id="70e2c-122">**HTTP DELETE** - 指定したリソースが表すエンティティ データを削除します。</span><span class="sxs-lookup"><span data-stu-id="70e2c-122">**HTTP DELETE** - Deletes the entity data that the specified resource represents.</span></span> <span data-ttu-id="70e2c-123">ペイロードは要求メッセージおよび応答メッセージ内に存在しません。</span><span class="sxs-lookup"><span data-stu-id="70e2c-123">A payload is not present in the request or response messages.</span></span>  
  
- <span data-ttu-id="70e2c-124">**HTTP PUT** - 要求されたリソースの既存のエンティティ データを、要求メッセージのペイロードで指定された新しいデータで置き換えます。</span><span class="sxs-lookup"><span data-stu-id="70e2c-124">**HTTP PUT** - Replaces existing entity data at the requested resource with new data that is supplied in the payload of the request message.</span></span>  
  
- <span data-ttu-id="70e2c-125">**HTTP MERGE** - エンティティ データを変更するためだけに削除を実行した後にデータ ソースへの挿入を実行する非効率性を考慮して、OData では新しい HTTP MERGE アクションが導入されています。</span><span class="sxs-lookup"><span data-stu-id="70e2c-125">**HTTP MERGE** - Because of inefficiencies in executing a delete followed by an insert in the data source just to change entity data, OData introduces a new HTTP MERGE action.</span></span> <span data-ttu-id="70e2c-126">要求メッセージのペイロードには、アドレス指定されたエンティティ リソースで変更する必要のあるプロパティが含まれます。</span><span class="sxs-lookup"><span data-stu-id="70e2c-126">The payload of the request message contains the properties that must be changed on the addressed entity resource.</span></span> <span data-ttu-id="70e2c-127">HTTP MERGE は HTTP 仕様で定義されていないので、OData 対応のサーバー以外で HTTP MERGE 要求をルーティングするには追加の処理が必要になる場合があります。</span><span class="sxs-lookup"><span data-stu-id="70e2c-127">Because HTTP MERGE is not defined in the HTTP specification, it may require additional processing to route a HTTP MERGE request through non-OData aware servers.</span></span>  
  
 <span data-ttu-id="70e2c-128">詳細については、[OData の操作](https://www.odata.org/documentation/odata-version-2-0/operations/)に関するページを参照してください。</span><span class="sxs-lookup"><span data-stu-id="70e2c-128">For more information, see [OData: Operations](https://www.odata.org/documentation/odata-version-2-0/operations/).</span></span>
  
### <a name="payload-formats"></a><span data-ttu-id="70e2c-129">ペイロード形式</span><span class="sxs-lookup"><span data-stu-id="70e2c-129">Payload Formats</span></span>  

 <span data-ttu-id="70e2c-130">HTTP PUT、HTTP POST、または HTTP MERGE 要求の場合、要求メッセージのペイロードは、データ サービスに送信するエンティティ データを含んでいます。</span><span class="sxs-lookup"><span data-stu-id="70e2c-130">For an HTTP PUT, HTTP POST, or HTTP MERGE request, the payload of a request message contains the entity data that you send to the data service.</span></span> <span data-ttu-id="70e2c-131">ペイロードのコンテンツは、メッセージのデータ形式によって異なります。</span><span class="sxs-lookup"><span data-stu-id="70e2c-131">The contents of the payload depend on the data format of the message.</span></span> <span data-ttu-id="70e2c-132">そのようなペイロードは、DELETE 以外のすべてのアクションに対する HTTP 応答にも含まれます。</span><span class="sxs-lookup"><span data-stu-id="70e2c-132">The HTTP responses to all actions except DELETE also contain such a payload.</span></span> <span data-ttu-id="70e2c-133">OData では、サービスでのデータのアクセスおよび変更を行うために、次のペイロード形式がサポートされています。</span><span class="sxs-lookup"><span data-stu-id="70e2c-133">OData supports the following payload formats for accessing and changing data with the service:</span></span>  
  
- <span data-ttu-id="70e2c-134">**Atom** - Web フィード、ポッドキャスト、Wiki、および XML ベースのインターネット機能用に HTTP を介したデータ交換を有効にするために Atom 公開プロトコル (AtomPub) の拡張として OData で定義されている XML ベースのメッセージ エンコーディング。</span><span class="sxs-lookup"><span data-stu-id="70e2c-134">**Atom** - An XML-based message encoding that is defined by OData as an extension to the Atom Publishing Protocol (AtomPub) to enable data exchange over HTTP for Web feeds, podcasts, wikis, and XML-based Internet functionality.</span></span> <span data-ttu-id="70e2c-135">詳細については、[OData のAtom 形式](https://www.odata.org/documentation/odata-version-2-0/atom-format/)に関するページを参照してください。</span><span class="sxs-lookup"><span data-stu-id="70e2c-135">For more information, see [OData: Atom Format](https://www.odata.org/documentation/odata-version-2-0/atom-format/).</span></span>
  
- <span data-ttu-id="70e2c-136">**JSON** - JSON (JavaScript Object Notation) は、JavaScript プログラミング言語のサブセットに基づく軽量のデータ交換形式です。</span><span class="sxs-lookup"><span data-stu-id="70e2c-136">**JSON** - JavaScript Object Notation (JSON) is a lightweight data interchange format that is based on a subset of the JavaScript Programming Language.</span></span> <span data-ttu-id="70e2c-137">詳細については、[OData のJSON 形式](https://www.odata.org/documentation/odata-version-2-0/json-format/)に関するページを参照してください。</span><span class="sxs-lookup"><span data-stu-id="70e2c-137">For more information, see [OData: JSON Format](https://www.odata.org/documentation/odata-version-2-0/json-format/).</span></span>
  
 <span data-ttu-id="70e2c-138">ペイロードのメッセージ形式は、HTTP 要求メッセージのヘッダーで要求されます。</span><span class="sxs-lookup"><span data-stu-id="70e2c-138">The message format of the payload is requested in the header of the HTTP request message.</span></span> <span data-ttu-id="70e2c-139">詳細については、[OData の操作](https://www.odata.org/documentation/odata-version-2-0/operations/)に関するページを参照してください。</span><span class="sxs-lookup"><span data-stu-id="70e2c-139">For more information, see [OData: Operations](https://www.odata.org/documentation/odata-version-2-0/operations/).</span></span>
  
## <a name="accessing-and-changing-data-using-client-libraries"></a><span data-ttu-id="70e2c-140">クライアント ライブラリを使用したデータのアクセスおよび変更</span><span class="sxs-lookup"><span data-stu-id="70e2c-140">Accessing and Changing Data Using Client Libraries</span></span>  

 <span data-ttu-id="70e2c-141">WCF Data Services には、.NET Framework ベースのクライアント アプリケーションおよび Silverlight ベースのクライアント アプリケーションから OData フィードを簡単に使用できるクライアント ライブラリが含まれています。</span><span class="sxs-lookup"><span data-stu-id="70e2c-141">WCF Data Services includes client libraries that enable you to more easily consume an OData feed from .NET Framework and Silverlight-based client applications.</span></span> <span data-ttu-id="70e2c-142">これらのライブラリは、HTTP メッセージの送受信を簡略化します。</span><span class="sxs-lookup"><span data-stu-id="70e2c-142">These libraries simplify sending and receiving HTTP messages.</span></span> <span data-ttu-id="70e2c-143">また、メッセージ ペイロードをエンティティ データを表す CLR オブジェクトに変換します。</span><span class="sxs-lookup"><span data-stu-id="70e2c-143">They also translate the message payload into CLR objects that represent entity data.</span></span> <span data-ttu-id="70e2c-144">クライアント ライブラリには、 <xref:System.Data.Services.Client.DataServiceContext> および <xref:System.Data.Services.Client.DataServiceQuery%601>という 2 つのコア クラスがあります。</span><span class="sxs-lookup"><span data-stu-id="70e2c-144">The client libraries feature the two core classes <xref:System.Data.Services.Client.DataServiceContext> and <xref:System.Data.Services.Client.DataServiceQuery%601>.</span></span> <span data-ttu-id="70e2c-145">これらのクラスを使用すると、データ サービスをクエリして、返されるエンティティ データを CLR オブジェクトとして処理できます。</span><span class="sxs-lookup"><span data-stu-id="70e2c-145">These classes enable you to query a data service and then work with the returned entity data as CLR objects.</span></span> <span data-ttu-id="70e2c-146">詳細については、「[WCF Data Services クライアント ライブラリ](wcf-data-services-client-library.md)」および「[WCF Data Services (Silverlight)](/previous-versions/windows/silverlight/dotnet-windows-silverlight/cc838234(v=vs.95))」を参照してください。</span><span class="sxs-lookup"><span data-stu-id="70e2c-146">For more information, see [WCF Data Services Client Library](wcf-data-services-client-library.md) and [WCF Data Services (Silverlight)](/previous-versions/windows/silverlight/dotnet-windows-silverlight/cc838234(v=vs.95)).</span></span>  
  
 <span data-ttu-id="70e2c-147">Visual Studio の **[サービス参照の追加]** ダイアログを使用して、参照をデータ サービスに追加できます。</span><span class="sxs-lookup"><span data-stu-id="70e2c-147">You can use the **Add Service Reference** dialog in Visual Studio to add a reference to a data service.</span></span> <span data-ttu-id="70e2c-148">このツールは、参照されたデータ サービスからサービス メタデータを要求し、データ サービスを表す <xref:System.Data.Services.Client.DataServiceContext> を生成します。また、エンティティを表すクライアント データ サービス クラスも生成します。</span><span class="sxs-lookup"><span data-stu-id="70e2c-148">This tool requests the service metadata from a referenced data service and generates the <xref:System.Data.Services.Client.DataServiceContext> that represents a data service, as well as generates the client data service classes that represent entities.</span></span> <span data-ttu-id="70e2c-149">詳しくは、「[データ サービス クライアント ライブラリの生成](generating-the-data-service-client-library-wcf-data-services.md)」をご覧ください。</span><span class="sxs-lookup"><span data-stu-id="70e2c-149">For more information, see [Generating the Data Service Client Library](generating-the-data-service-client-library-wcf-data-services.md).</span></span>  
  
 <span data-ttu-id="70e2c-150">その他の種類のクライアント アプリケーションで OData フィードを使用するためのプログラミング ライブラリを利用できます。</span><span class="sxs-lookup"><span data-stu-id="70e2c-150">There are programming libraries available that you can use to consume an OData feed in other kinds of client applications.</span></span> <span data-ttu-id="70e2c-151">OData SDK の詳細については、[OData SDK のサンプルコード](https://www.odata.org/ecosystem/#sdk)を参照してください。</span><span class="sxs-lookup"><span data-stu-id="70e2c-151">For more information on OData SDK, see [OData SDK - Sample Code](https://www.odata.org/ecosystem/#sdk).</span></span>
  
## <a name="see-also"></a><span data-ttu-id="70e2c-152">関連項目</span><span class="sxs-lookup"><span data-stu-id="70e2c-152">See also</span></span>

- [<span data-ttu-id="70e2c-153">データ サービス リソースへのアクセス</span><span class="sxs-lookup"><span data-stu-id="70e2c-153">Accessing Data Service Resources</span></span>](accessing-data-service-resources-wcf-data-services.md)
- [<span data-ttu-id="70e2c-154">クイック スタート</span><span class="sxs-lookup"><span data-stu-id="70e2c-154">Quickstart</span></span>](quickstart-wcf-data-services.md)
