---
title: リレーショナル データ ソースとNoSQL データ
description: クラウドネイティブアプリケーションでのリレーショナルデータと NoSQL データについて説明します
author: robvet
ms.date: 05/17/2020
ms.openlocfilehash: 6e7725c2d67452218d1c6bda89c2fec6aa4a2b96
ms.sourcegitcommit: 5b475c1855b32cf78d2d1bbb4295e4c236f39464
ms.translationtype: MT
ms.contentlocale: ja-JP
ms.lasthandoff: 09/24/2020
ms.locfileid: "91163636"
---
# <a name="relational-vs-nosql-data"></a><span data-ttu-id="f467a-103">リレーショナル データ ソースとNoSQL データ</span><span class="sxs-lookup"><span data-stu-id="f467a-103">Relational vs. NoSQL data</span></span>

<span data-ttu-id="f467a-104">リレーショナルと NoSQL は、クラウドネイティブアプリで一般的に実装される2種類のデータベースシステムです。</span><span class="sxs-lookup"><span data-stu-id="f467a-104">Relational and NoSQL are two types of database systems commonly implemented in cloud-native apps.</span></span> <span data-ttu-id="f467a-105">異なる方法で作成され、異なる方法でデータを格納します。</span><span class="sxs-lookup"><span data-stu-id="f467a-105">They're built differently, store data differently, and accessed differently.</span></span> <span data-ttu-id="f467a-106">このセクションでは、両方を見ていきます。</span><span class="sxs-lookup"><span data-stu-id="f467a-106">In this section, we'll look at both.</span></span> <span data-ttu-id="f467a-107">この章の後半では、 *Newsql*という新しいデータベーステクノロジについて説明します。</span><span class="sxs-lookup"><span data-stu-id="f467a-107">Later in this chapter, we'll look at an emerging database technology called *NewSQL*.</span></span>

<span data-ttu-id="f467a-108">*リレーショナルデータベース* は、数十年にわたり一般的なテクノロジでした。</span><span class="sxs-lookup"><span data-stu-id="f467a-108">*Relational databases* have been a prevalent technology for decades.</span></span> <span data-ttu-id="f467a-109">成熟し、実証済みで、広く実装されています。</span><span class="sxs-lookup"><span data-stu-id="f467a-109">They're mature, proven, and widely implemented.</span></span> <span data-ttu-id="f467a-110">競合するデータベース製品、ツール、専門知識が豊富にあります。</span><span class="sxs-lookup"><span data-stu-id="f467a-110">Competing database products, tooling, and expertise abound.</span></span> <span data-ttu-id="f467a-111">リレーショナルデータベースは、関連するデータテーブルのストアを提供します。</span><span class="sxs-lookup"><span data-stu-id="f467a-111">Relational databases provide a store of related data tables.</span></span> <span data-ttu-id="f467a-112">これらのテーブルには固定スキーマがあり、SQL (構造化照会言語) を使用してデータを管理し、ACID 保証をサポートしています。</span><span class="sxs-lookup"><span data-stu-id="f467a-112">These tables have a fixed schema, use SQL (Structured Query Language) to manage data, and support ACID guarantees.</span></span>

<span data-ttu-id="f467a-113">*SQL データベース* は、高パフォーマンスの非リレーショナルデータストアを参照します。</span><span class="sxs-lookup"><span data-stu-id="f467a-113">*No-SQL databases* refer to high-performance, non-relational data stores.</span></span> <span data-ttu-id="f467a-114">これらは、使いやすさ、スケーラビリティ、回復性、および可用性の特性を excel で実現しています。</span><span class="sxs-lookup"><span data-stu-id="f467a-114">They excel in their ease-of-use, scalability, resilience, and availability characteristics.</span></span> <span data-ttu-id="f467a-115">NoSQL は、正規化されたデータのテーブルを結合するのではなく、非構造化データまたは半構造化データをキーと値のペアまたは JSON ドキュメントに格納します。</span><span class="sxs-lookup"><span data-stu-id="f467a-115">Instead of joining tables of normalized data, NoSQL stores unstructured or semi-structured data, often in key-value pairs or JSON documents.</span></span> <span data-ttu-id="f467a-116">SQL データベースでは、通常、単一のデータベースパーティションのスコープを超える ACID 保証は提供されません。</span><span class="sxs-lookup"><span data-stu-id="f467a-116">No-SQL databases typically don't provide ACID guarantees beyond the scope of a single database partition.</span></span> <span data-ttu-id="f467a-117">Sub second 応答時間を必要とする高ボリュームサービスでは、NoSQL データストアを優先します。</span><span class="sxs-lookup"><span data-stu-id="f467a-117">High volume services that require sub second response time favor NoSQL datastores.</span></span>

<span data-ttu-id="f467a-118">分散クラウドネイティブシステムの [NoSQL](https://www.geeksforgeeks.org/introduction-to-nosql/) テクノロジの影響を数多くにすることはできません。</span><span class="sxs-lookup"><span data-stu-id="f467a-118">The impact of [NoSQL](https://www.geeksforgeeks.org/introduction-to-nosql/) technologies for distributed cloud-native systems can't be overstated.</span></span> <span data-ttu-id="f467a-119">この領域に新しいデータテクノロジが急増すると、リレーショナルデータベースに排他的に依存するソリューションが中断されました。</span><span class="sxs-lookup"><span data-stu-id="f467a-119">The proliferation of new data technologies in this space has disrupted solutions that once exclusively relied on relational databases.</span></span>

<span data-ttu-id="f467a-120">NoSQL データベースには、データにアクセスして管理するための複数の異なるモデルが含まれており、それぞれが特定のユースケースに適しています。</span><span class="sxs-lookup"><span data-stu-id="f467a-120">NoSQL databases include several different models for accessing and managing data, each suited to specific use cases.</span></span> <span data-ttu-id="f467a-121">図5-9 は、4つの一般的なモデルを示しています。</span><span class="sxs-lookup"><span data-stu-id="f467a-121">Figure 5-9 presents four common models.</span></span>

![NoSQL データモデル](./media/types-of-nosql-datastores.png)

<span data-ttu-id="f467a-123">**図 5-9**: NoSQL データベースのデータモデル</span><span class="sxs-lookup"><span data-stu-id="f467a-123">**Figure 5-9**: Data models for NoSQL databases</span></span>

| <span data-ttu-id="f467a-124">モデル</span><span class="sxs-lookup"><span data-stu-id="f467a-124">Model</span></span> | <span data-ttu-id="f467a-125">特性</span><span class="sxs-lookup"><span data-stu-id="f467a-125">Characteristics</span></span> |
| :-------- | :-------- |
| <span data-ttu-id="f467a-126">ドキュメント ストア</span><span class="sxs-lookup"><span data-stu-id="f467a-126">Document Store</span></span> | <span data-ttu-id="f467a-127">データとメタデータは、データベース内の JSON ベースのドキュメントに階層的に格納されます。</span><span class="sxs-lookup"><span data-stu-id="f467a-127">Data and metadata are stored hierarchically in JSON-based documents inside the database.</span></span> |
| <span data-ttu-id="f467a-128">キー値のストア</span><span class="sxs-lookup"><span data-stu-id="f467a-128">Key Value Store</span></span> | <span data-ttu-id="f467a-129">最も単純な NoSQL データベースであるデータは、キーと値のペアのコレクションとして表されます。</span><span class="sxs-lookup"><span data-stu-id="f467a-129">The simplest of the NoSQL databases, data is represented as a collection of key-value pairs.</span></span> |
| <span data-ttu-id="f467a-130">ワイド列ストア</span><span class="sxs-lookup"><span data-stu-id="f467a-130">Wide-Column Store</span></span> | <span data-ttu-id="f467a-131">関連データは、1つの列に入れ子になったキーと値のペアのセットとして格納されます。</span><span class="sxs-lookup"><span data-stu-id="f467a-131">Related data is stored as a set of nested-key/value pairs within a single column.</span></span> |
| <span data-ttu-id="f467a-132">グラフ ストア</span><span class="sxs-lookup"><span data-stu-id="f467a-132">Graph Store</span></span> | <span data-ttu-id="f467a-133">データは、ノード、エッジ、およびデータプロパティとしてグラフ構造に格納されます。</span><span class="sxs-lookup"><span data-stu-id="f467a-133">Data is stored in a graph structure as node, edge, and data properties.</span></span> |

## <a name="the-cap-theorem"></a><span data-ttu-id="f467a-134">CAP 定理</span><span class="sxs-lookup"><span data-stu-id="f467a-134">The CAP theorem</span></span>

<span data-ttu-id="f467a-135">これらの種類のデータベースの違いを理解するには、CAP 定理を検討してください。これは、状態を格納する分散システムに適用される一連の原則です。</span><span class="sxs-lookup"><span data-stu-id="f467a-135">As a way to understand the differences between these types of databases, consider the CAP theorem, a set of principles applied to distributed systems that store state.</span></span> <span data-ttu-id="f467a-136">図5-10 は、キャップ定理の3つのプロパティを示しています。</span><span class="sxs-lookup"><span data-stu-id="f467a-136">Figure 5-10 shows the three properties of the CAP theorem.</span></span>

![CAP 定理](./media/cap-theorem.png)

<span data-ttu-id="f467a-138">**図 5-10**</span><span class="sxs-lookup"><span data-stu-id="f467a-138">**Figure 5-10**.</span></span> <span data-ttu-id="f467a-139">CAP 定理</span><span class="sxs-lookup"><span data-stu-id="f467a-139">The CAP theorem</span></span>

<span data-ttu-id="f467a-140">定理は、分散データシステムが整合性、可用性、およびパーティションの許容範囲の間にトレードオフを提供することを示しています。</span><span class="sxs-lookup"><span data-stu-id="f467a-140">The theorem states that distributed data systems will offer a trade-off between consistency, availability, and partition tolerance.</span></span> <span data-ttu-id="f467a-141">また、どのデータベースでも保証できるのは、次の3つのプロパティのうち *2 つ* だけです。</span><span class="sxs-lookup"><span data-stu-id="f467a-141">And, that any database can only guarantee *two* of the three properties:</span></span>

- <span data-ttu-id="f467a-142">*確保.*</span><span class="sxs-lookup"><span data-stu-id="f467a-142">*Consistency.*</span></span> <span data-ttu-id="f467a-143">すべてのレプリカが更新されるまで、システムが要求をブロックする必要がある場合でも、クラスター内のすべてのノードが最新のデータで応答します。</span><span class="sxs-lookup"><span data-stu-id="f467a-143">Every node in the cluster responds with the most recent data, even if the system must block the request until all replicas update.</span></span> <span data-ttu-id="f467a-144">現在更新中の項目に対して "一貫性のあるシステム" を照会した場合、すべてのレプリカが正常に更新されるまで、その応答を待機します。</span><span class="sxs-lookup"><span data-stu-id="f467a-144">If you query a "consistent system" for an item that is currently updating, you'll wait for that response until all replicas successfully update.</span></span> <span data-ttu-id="f467a-145">ただし、最新のデータを受け取ることができます。</span><span class="sxs-lookup"><span data-stu-id="f467a-145">However, you'll receive the most current data.</span></span>

- <span data-ttu-id="f467a-146">*可用性.*</span><span class="sxs-lookup"><span data-stu-id="f467a-146">*Availability.*</span></span> <span data-ttu-id="f467a-147">すべてのノードは、応答が最新のデータではない場合でも、直ちに応答を返します。</span><span class="sxs-lookup"><span data-stu-id="f467a-147">Every node returns an immediate response, even if that response isn't the most recent data.</span></span> <span data-ttu-id="f467a-148">更新中の項目に対して "使用可能なシステム" を照会すると、その時点でサービスが提供できる最適な回答が得られます。</span><span class="sxs-lookup"><span data-stu-id="f467a-148">If you query an "available system" for an item that is updating, you'll get the best possible answer the service can provide at that moment.</span></span>

- <span data-ttu-id="f467a-149">*パーティションの許容範囲。*</span><span class="sxs-lookup"><span data-stu-id="f467a-149">*Partition Tolerance.*</span></span> <span data-ttu-id="f467a-150">レプリケートされたデータノードで障害が発生した場合や、他のレプリケートされたデータノードとの接続が失われた場合でも、システムの動作が保証されます。</span><span class="sxs-lookup"><span data-stu-id="f467a-150">Guarantees the system continues to operate even if a replicated data node fails or loses connectivity with other replicated data nodes.</span></span>

<span data-ttu-id="f467a-151">リレーショナルデータベースは通常、整合性と可用性を提供しますが、パーティションの許容範囲は提供しません。</span><span class="sxs-lookup"><span data-stu-id="f467a-151">Relational databases typically provide consistency and availability, but not partition tolerance.</span></span> <span data-ttu-id="f467a-152">通常は、1台のサーバーにプロビジョニングされ、コンピューターにリソースを追加して垂直方向にスケールします。</span><span class="sxs-lookup"><span data-stu-id="f467a-152">They're typically provisioned to a single server and scale vertically by adding more resources to the machine.</span></span>

<span data-ttu-id="f467a-153">多くのリレーショナルデータベースシステムでは、プライマリデータベースのコピーを他のセカンダリサーバーインスタンスに対して実行できる、組み込みのレプリケーション機能がサポートされています。</span><span class="sxs-lookup"><span data-stu-id="f467a-153">Many relational database systems support built-in replication features where copies of the primary database can be made to other secondary server instances.</span></span> <span data-ttu-id="f467a-154">書き込み操作は、プライマリインスタンスに対して行われ、各セカンダリにレプリケートされます。</span><span class="sxs-lookup"><span data-stu-id="f467a-154">Write operations are made to the primary instance and replicated to each of the secondaries.</span></span> <span data-ttu-id="f467a-155">障害が発生すると、プライマリインスタンスはセカンダリにフェールオーバーして高可用性を実現できます。</span><span class="sxs-lookup"><span data-stu-id="f467a-155">Upon a failure, the primary instance can fail over to a secondary to provide high availability.</span></span> <span data-ttu-id="f467a-156">セカンダリを使用して、読み取り操作を配布することもできます。</span><span class="sxs-lookup"><span data-stu-id="f467a-156">Secondaries can also be used to distribute read operations.</span></span> <span data-ttu-id="f467a-157">書き込み操作は常にプライマリレプリカに対して行われますが、読み取り操作を任意のセカンダリにルーティングしてシステム負荷を減らすことができます。</span><span class="sxs-lookup"><span data-stu-id="f467a-157">While writes operations always go against the primary replica, read operations can be routed to any of the secondaries to reduce system load.</span></span>

<span data-ttu-id="f467a-158">データは、 [シャーディング](/azure/sql-database/sql-database-elastic-scale-introduction)など、複数のノードにわたって水平方向にパーティション分割することもできます。</span><span class="sxs-lookup"><span data-stu-id="f467a-158">Data can also be horizontally partitioned across multiple nodes, such as with [sharding](/azure/sql-database/sql-database-elastic-scale-introduction).</span></span> <span data-ttu-id="f467a-159">しかし、シャーディングは、簡単には通信できない多くのデータを spitting することによって、運用上のオーバーヘッドを劇的に増やします。</span><span class="sxs-lookup"><span data-stu-id="f467a-159">But, sharding dramatically increases operational overhead by spitting data across many pieces that cannot easily communicate.</span></span> <span data-ttu-id="f467a-160">コストがかかり、管理に時間がかかることがあります。</span><span class="sxs-lookup"><span data-stu-id="f467a-160">It can be costly and time consuming to manage.</span></span> <span data-ttu-id="f467a-161">最終的には、パフォーマンス、テーブルの結合、および参照整合性に影響を与える可能性があります。</span><span class="sxs-lookup"><span data-stu-id="f467a-161">It can end up impacting performance, table joins, and referential integrity.</span></span>

<span data-ttu-id="f467a-162">データレプリカが "非常に一貫性のある" リレーショナルデータベースクラスターでネットワーク接続を失った場合、データベースに書き込むことはできません。</span><span class="sxs-lookup"><span data-stu-id="f467a-162">If data replicas were to lose network connectivity in a "highly consistent" relational database cluster, you wouldn't be able to write to the database.</span></span> <span data-ttu-id="f467a-163">書き込み操作は、その変更を他のデータレプリカにレプリケートできないため、システムによって拒否されます。</span><span class="sxs-lookup"><span data-stu-id="f467a-163">The system would reject the write operation as it can't replicate that change to the other data replica.</span></span> <span data-ttu-id="f467a-164">トランザクションを完了するには、すべてのデータレプリカを更新する必要があります。</span><span class="sxs-lookup"><span data-stu-id="f467a-164">Every data replica has to update before the transaction can complete.</span></span>

<span data-ttu-id="f467a-165">NoSQL データベースは、通常、高可用性とパーティションの許容範囲をサポートしています。</span><span class="sxs-lookup"><span data-stu-id="f467a-165">NoSQL databases typically support high availability and partition tolerance.</span></span> <span data-ttu-id="f467a-166">これらは、一般に汎用サーバー間で水平方向にスケールアウトされます。</span><span class="sxs-lookup"><span data-stu-id="f467a-166">They scale out horizontally, often across commodity servers.</span></span> <span data-ttu-id="f467a-167">このアプローチでは、地理的なリージョン内外でのコスト削減により、高可用性を実現します。</span><span class="sxs-lookup"><span data-stu-id="f467a-167">This approach provides tremendous availability, both within and across geographical regions at a reduced cost.</span></span> <span data-ttu-id="f467a-168">これらのマシンまたはノード間でデータをパーティション分割してレプリケートし、冗長性とフォールトトレランスを提供します。</span><span class="sxs-lookup"><span data-stu-id="f467a-168">You partition and replicate data across these machines, or nodes, providing redundancy and fault tolerance.</span></span> <span data-ttu-id="f467a-169">欠点は、整合性です。</span><span class="sxs-lookup"><span data-stu-id="f467a-169">The downside is consistency.</span></span> <span data-ttu-id="f467a-170">1つの NoSQL ノード上のデータに対する変更は、他のノードに反映されるまでに時間がかかることがあります。</span><span class="sxs-lookup"><span data-stu-id="f467a-170">A change to data on one NoSQL node can take some time to propagate to other nodes.</span></span> <span data-ttu-id="f467a-171">通常、NoSQL データベースノードは、表示されているデータが古く、まだ更新されていない場合でも、クエリに対してすぐに応答を提供します。</span><span class="sxs-lookup"><span data-stu-id="f467a-171">Typically, a NoSQL database node will provide an immediate response to a query - even if the data that is presented is stale and hasn't updated yet.</span></span>

<span data-ttu-id="f467a-172">データレプリカが "高可用性" NoSQL データベースクラスター内の接続を失った場合でも、データベースに対する書き込み操作を完了できます。</span><span class="sxs-lookup"><span data-stu-id="f467a-172">If data replicas were to lose connectivity in a "highly available" NoSQL database cluster, you could still complete a write operation to the database.</span></span> <span data-ttu-id="f467a-173">データベースクラスターでは、書き込み操作が許可され、各データレプリカが使用可能になった時点で更新されます。</span><span class="sxs-lookup"><span data-stu-id="f467a-173">The database cluster would allow the write operation and update each data replica as it becomes available.</span></span>

<span data-ttu-id="f467a-174">このような結果は、ACID トランザクションがサポートされていない分散データシステムの特性である "最終的な整合性" と呼ばれます。</span><span class="sxs-lookup"><span data-stu-id="f467a-174">This kind of result is known as eventual consistency, a characteristic of distributed data systems where ACID transactions aren't supported.</span></span> <span data-ttu-id="f467a-175">データ項目が更新されてから、その更新が各レプリカノードに反映されるまでにかかる時間が短くなります。</span><span class="sxs-lookup"><span data-stu-id="f467a-175">It's a brief delay between the update of a data item and time that it takes to propagate that update to each of the replica nodes.</span></span> <span data-ttu-id="f467a-176">通常の状況では、lag は通常は短くなりますが、問題が発生すると増加する可能性があります。</span><span class="sxs-lookup"><span data-stu-id="f467a-176">Under normal conditions, the lag is typically short, but can increase when problems arise.</span></span> <span data-ttu-id="f467a-177">たとえば、米国で NoSQL データベースの製品項目を更新し、ヨーロッパのレプリカノードから同じデータ項目を照会した場合はどうなるでしょうか。</span><span class="sxs-lookup"><span data-stu-id="f467a-177">For example, what would happen if you were to update a product item in a NoSQL database in the United States and query that same data item from a replica node in Europe?</span></span> <span data-ttu-id="f467a-178">クラスターが製品の変更によって欧州ノードを更新するまで、以前の製品情報が表示されます。</span><span class="sxs-lookup"><span data-stu-id="f467a-178">You would receive the earlier product information, until the cluster updates the European node with the product change.</span></span> <span data-ttu-id="f467a-179">クエリ結果を直ちに返し、すべてのレプリカノードが更新されるのを待たずに、大幅なスケールとボリュームが得られますが、古いデータが表示される可能性があります。</span><span class="sxs-lookup"><span data-stu-id="f467a-179">By immediately returning a query result and not waiting for all replica nodes to update, you gain enormous scale and volume, but with the possibility of presenting older data.</span></span>

<span data-ttu-id="f467a-180">多くの場合、高可用性と大規模なスケーラビリティは、強力な整合性よりもビジネスにとって重要です。</span><span class="sxs-lookup"><span data-stu-id="f467a-180">High availability and massive scalability are often more critical to the business than strong consistency.</span></span> <span data-ttu-id="f467a-181">開発者は、Sagas、CQRS、非同期メッセージングなどの手法やパターンを実装して、最終的な整合性を実現できます。</span><span class="sxs-lookup"><span data-stu-id="f467a-181">Developers can implement techniques and patterns such as Sagas, CQRS, and asynchronous messaging to embrace eventual consistency.</span></span>

> <span data-ttu-id="f467a-182">今日では、CAP 定理の制約を使用する場合は注意が必要です。</span><span class="sxs-lookup"><span data-stu-id="f467a-182">Nowadays, care must be taken when conidering the CAP theorem constraints.</span></span> <span data-ttu-id="f467a-183">NewSQL と呼ばれる新しい種類のデータベースが登場しました。これにより、リレーショナルデータベースエンジンが拡張され、水平方向のスケーラビリティと NoSQL システムのスケーラブルなパフォーマンスの両方がサポートされます。</span><span class="sxs-lookup"><span data-stu-id="f467a-183">A new type of database, called NewSQL, has emerged which extends the relational database engine to support both horizontal scalability and the scalable performance of NoSQL systems.</span></span>

## <a name="considerations-for-relational-vs-nosql-systems"></a><span data-ttu-id="f467a-184">リレーショナルシステムおよび NoSQL システムに関する考慮事項</span><span class="sxs-lookup"><span data-stu-id="f467a-184">Considerations for relational vs. NoSQL systems</span></span>

<span data-ttu-id="f467a-185">クラウドネイティブベースのマイクロサービスでは、特定のデータ要件に基づいて、リレーショナル、NoSQL データストア、またはその両方を実装できます。</span><span class="sxs-lookup"><span data-stu-id="f467a-185">Based upon specific data requirements, a cloud-native-based microservice can implement a relational, NoSQL datastore or both.</span></span>

|  <span data-ttu-id="f467a-186">次の場合は、NoSQL データストアを検討してください。</span><span class="sxs-lookup"><span data-stu-id="f467a-186">Consider a NoSQL datastore when:</span></span> | <span data-ttu-id="f467a-187">次の場合にリレーショナルデータベースを検討します。</span><span class="sxs-lookup"><span data-stu-id="f467a-187">Consider a relational database when:</span></span> |
| :-------- | :-------- |
| <span data-ttu-id="f467a-188">大規模なワークロードを必要とするボリュームが多い</span><span class="sxs-lookup"><span data-stu-id="f467a-188">You have high volume workloads that require large scale</span></span> | <span data-ttu-id="f467a-189">ワークロードボリュームは一貫しており、中規模から大規模の規模が必要</span><span class="sxs-lookup"><span data-stu-id="f467a-189">Your workload volume is consistent and requires medium to large scale</span></span> |
| <span data-ttu-id="f467a-190">ワークロードに ACID 保証は不要</span><span class="sxs-lookup"><span data-stu-id="f467a-190">Your workloads don't require ACID guarantees</span></span> |  <span data-ttu-id="f467a-191">ACID 保証が必要です</span><span class="sxs-lookup"><span data-stu-id="f467a-191">ACID guarantees are required</span></span> |
| <span data-ttu-id="f467a-192">データは動的で頻繁に変更されます</span><span class="sxs-lookup"><span data-stu-id="f467a-192">Your data is dynamic and frequently changes</span></span> | <span data-ttu-id="f467a-193">データが予測可能で、高度に構造化されている</span><span class="sxs-lookup"><span data-stu-id="f467a-193">Your data is predictable and highly structured</span></span> |
| <span data-ttu-id="f467a-194">リレーションシップを使用せずにデータを表すことができます。</span><span class="sxs-lookup"><span data-stu-id="f467a-194">Data can be expressed without relationships</span></span> | <span data-ttu-id="f467a-195">データは relationally に最適です。</span><span class="sxs-lookup"><span data-stu-id="f467a-195">Data is best expressed relationally</span></span> |  
| <span data-ttu-id="f467a-196">高速書き込みが必要であり、書き込みの安全性が重要ではない</span><span class="sxs-lookup"><span data-stu-id="f467a-196">You need fast writes and write safety isn't critical</span></span> | <span data-ttu-id="f467a-197">書き込みの安全性が必要です</span><span class="sxs-lookup"><span data-stu-id="f467a-197">Write safety is a requirement</span></span> |  
| <span data-ttu-id="f467a-198">データの取得は単純であり、フラットである傾向があります。</span><span class="sxs-lookup"><span data-stu-id="f467a-198">Data retrieval is simple and tends to be flat</span></span> | <span data-ttu-id="f467a-199">複雑なクエリとレポートを操作する</span><span class="sxs-lookup"><span data-stu-id="f467a-199">You work with complex queries and reports</span></span>|
| <span data-ttu-id="f467a-200">データには、地理的に広い分布が必要です</span><span class="sxs-lookup"><span data-stu-id="f467a-200">Your data requires a wide geographic distribution</span></span> | <span data-ttu-id="f467a-201">ユーザーの集中管理</span><span class="sxs-lookup"><span data-stu-id="f467a-201">Your users are more centralized</span></span> |
| <span data-ttu-id="f467a-202">アプリケーションは、パブリッククラウドなどの汎用的なハードウェアにデプロイされます。</span><span class="sxs-lookup"><span data-stu-id="f467a-202">Your application will be deployed to commodity hardware, such as with public clouds</span></span> | <span data-ttu-id="f467a-203">アプリケーションは、大規模なハイエンドハードウェアにデプロイされます。</span><span class="sxs-lookup"><span data-stu-id="f467a-203">Your application will be deployed to large, high-end hardware</span></span> |

<span data-ttu-id="f467a-204">次のセクションでは、クラウドネイティブデータを格納および管理するために Azure クラウドで利用できるオプションについて説明します。</span><span class="sxs-lookup"><span data-stu-id="f467a-204">In the next sections, we'll explore the options available in the Azure cloud for storing and managing your cloud-native data.</span></span>

## <a name="database-as-a-service"></a><span data-ttu-id="f467a-205">サービスとしてのデータベース</span><span class="sxs-lookup"><span data-stu-id="f467a-205">Database as a Service</span></span>

<span data-ttu-id="f467a-206">まず、Azure 仮想マシンをプロビジョニングし、各サービスに対して任意のデータベースをインストールすることができます。</span><span class="sxs-lookup"><span data-stu-id="f467a-206">To start, you could provision an Azure virtual machine and install your database of choice for each service.</span></span> <span data-ttu-id="f467a-207">環境を完全に制御できますが、クラウドプラットフォームの多くの組み込み機能を済ませるしています。</span><span class="sxs-lookup"><span data-stu-id="f467a-207">While you'd have full control over the environment, you'd forgo many built-in features of the cloud platform.</span></span> <span data-ttu-id="f467a-208">また、各サービスの仮想マシンとデータベースの管理も行います。</span><span class="sxs-lookup"><span data-stu-id="f467a-208">You'd also be responsible for managing the virtual machine and database for each service.</span></span> <span data-ttu-id="f467a-209">このアプローチは、短時間で時間がかかり、コストがかかる可能性があります。</span><span class="sxs-lookup"><span data-stu-id="f467a-209">This approach could quickly become time-consuming and expensive.</span></span>

<span data-ttu-id="f467a-210">代わりに、クラウドネイティブアプリケーションは、サービスとしての [データベース (DBaaS)](https://www.stratoscale.com/blog/dbaas/what-is-database-as-a-service/)として公開されるデータサービスを優先します。</span><span class="sxs-lookup"><span data-stu-id="f467a-210">Instead, cloud-native applications favor data services exposed as a [Database as a Service (DBaaS)](https://www.stratoscale.com/blog/dbaas/what-is-database-as-a-service/).</span></span> <span data-ttu-id="f467a-211">クラウドベンダーによって完全に管理されています。これらのサービスには、組み込みのセキュリティ、スケーラビリティ、および監視機能が備わっています。</span><span class="sxs-lookup"><span data-stu-id="f467a-211">Fully managed by a cloud vendor, these services provide built-in security, scalability, and monitoring.</span></span> <span data-ttu-id="f467a-212">サービスを所有するのではなく、単にそれを [バッキングサービス](./definition.md#backing-services)として使用します。</span><span class="sxs-lookup"><span data-stu-id="f467a-212">Instead of owning the service, you simply consume it as a [backing service](./definition.md#backing-services).</span></span> <span data-ttu-id="f467a-213">プロバイダーは、大規模なリソースを操作し、パフォーマンスとメンテナンスの責任を担います。</span><span class="sxs-lookup"><span data-stu-id="f467a-213">The provider operates the resource at scale and bears the responsibility for performance and maintenance.</span></span>

<span data-ttu-id="f467a-214">高可用性を実現するために、クラウドの可用性ゾーンとリージョンで構成することができます。</span><span class="sxs-lookup"><span data-stu-id="f467a-214">They can be configured across cloud availability zones and regions to achieve high availability.</span></span> <span data-ttu-id="f467a-215">これらはすべて、ジャストインタイム容量と従量課金制モデルをサポートしています。</span><span class="sxs-lookup"><span data-stu-id="f467a-215">They all support just-in-time capacity and a pay-as-you-go model.</span></span> <span data-ttu-id="f467a-216">Azure にはさまざまな種類の管理データサービスオプションがあり、それぞれに固有の利点があります。</span><span class="sxs-lookup"><span data-stu-id="f467a-216">Azure features different kinds of managed data service options, each with specific benefits.</span></span>

<span data-ttu-id="f467a-217">まず、Azure で使用できるリレーショナル DBaaS サービスについて説明します。</span><span class="sxs-lookup"><span data-stu-id="f467a-217">We'll first look at relational DBaaS services available in Azure.</span></span> <span data-ttu-id="f467a-218">Microsoft の主要な SQL Server データベースが、いくつかのオープンソースオプションと共に利用できることがわかります。</span><span class="sxs-lookup"><span data-stu-id="f467a-218">You'll see that Microsoft's flagship SQL Server database is available along with several open-source options.</span></span> <span data-ttu-id="f467a-219">次に、Azure の NoSQL data サービスについて説明します。</span><span class="sxs-lookup"><span data-stu-id="f467a-219">Then, we'll talk about the NoSQL data services in Azure.</span></span>

## <a name="azure-relational-databases"></a><span data-ttu-id="f467a-220">Azure リレーショナルデータベース</span><span class="sxs-lookup"><span data-stu-id="f467a-220">Azure relational databases</span></span>

<span data-ttu-id="f467a-221">リレーショナルデータを必要とするクラウドネイティブマイクロサービスでは、図5-11 に示すように、4つのサービスとしてのリレーショナルデータベース (DBaaS) が Azure に用意されています。</span><span class="sxs-lookup"><span data-stu-id="f467a-221">For cloud-native microservices that require relational data, Azure offers four managed relational databases as a service (DBaaS) offerings, shown in Figure 5-11.</span></span>

![Azure での管理されたリレーショナルデータベース](./media/azure-managed-databases.png)

<span data-ttu-id="f467a-223">**図 5-11**</span><span class="sxs-lookup"><span data-stu-id="f467a-223">**Figure 5-11**.</span></span> <span data-ttu-id="f467a-224">Azure で使用可能な管理されたリレーショナルデータベース</span><span class="sxs-lookup"><span data-stu-id="f467a-224">Managed relational databases available in Azure</span></span>

<span data-ttu-id="f467a-225">前の図では、各が共通の DBaaS インフラストラクチャにどのように配置されているかに注目してください。これは、追加コストなしで重要な機能を提供します。</span><span class="sxs-lookup"><span data-stu-id="f467a-225">In the previous figure, note how each sits upon a common DBaaS infrastructure which features key capabilities at no additional cost.</span></span>

<span data-ttu-id="f467a-226">これらの機能は、多数のデータベースをプロビジョニングし、それらを管理するためのリソースが限られている組織にとって特に重要です。</span><span class="sxs-lookup"><span data-stu-id="f467a-226">These features are especially important to organizations who provision large numbers of databases, but have limited resources to administer them.</span></span>
<span data-ttu-id="f467a-227">Azure データベースを数分でプロビジョニングするには、処理コア、メモリ、および基になるストレージの量を選択します。</span><span class="sxs-lookup"><span data-stu-id="f467a-227">You can provision an Azure database in minutes by selecting the amount of processing cores, memory, and underlying storage.</span></span> <span data-ttu-id="f467a-228">データベースを即座にスケーリングし、ダウンタイムなしでリソースを動的に調整できます。</span><span class="sxs-lookup"><span data-stu-id="f467a-228">You can scale the database on-the-fly and dynamically adjust resources with little to no downtime.</span></span>

## <a name="azure-sql-database"></a><span data-ttu-id="f467a-229">Azure SQL データベース</span><span class="sxs-lookup"><span data-stu-id="f467a-229">Azure SQL Database</span></span>

<span data-ttu-id="f467a-230">Microsoft SQL Server の専門知識を持つ開発チームは、 [Azure SQL Database](/azure/sql-database/)について検討する必要があります。</span><span class="sxs-lookup"><span data-stu-id="f467a-230">Development teams with expertise in Microsoft SQL Server should consider [Azure SQL Database](/azure/sql-database/).</span></span> <span data-ttu-id="f467a-231">これは、Microsoft SQL Server データベースエンジンに基づく、完全に管理されたサービスとしてのリレーショナルデータベース (DBaaS) です。</span><span class="sxs-lookup"><span data-stu-id="f467a-231">It's a fully managed relational database-as-a-service (DBaaS) based on the Microsoft SQL Server Database Engine.</span></span> <span data-ttu-id="f467a-232">このサービスは、オンプレミスバージョンの SQL Server で検出された多くの機能を共有し、SQL Server データベースエンジンの最新の安定したバージョンを実行します。</span><span class="sxs-lookup"><span data-stu-id="f467a-232">The service shares many features found in the on-premises version of SQL Server and runs the latest stable version of the SQL Server Database Engine.</span></span>

<span data-ttu-id="f467a-233">クラウドネイティブマイクロサービスで使用する場合は、次の3つのデプロイオプションを使用して Azure SQL Database を使用できます。</span><span class="sxs-lookup"><span data-stu-id="f467a-233">For use with a cloud-native microservice, Azure SQL Database is available with three deployment options:</span></span>

- <span data-ttu-id="f467a-234">Single Database は、Azure クラウドの [Azure SQL Database サーバー](/azure/sql-database/sql-database-servers) で実行されている完全に管理された SQL Database を表します。</span><span class="sxs-lookup"><span data-stu-id="f467a-234">A Single Database represents a fully managed SQL Database running on an [Azure SQL Database server](/azure/sql-database/sql-database-servers) in the Azure cloud.</span></span> <span data-ttu-id="f467a-235">データベースは、基になるデータベースサーバーに構成の依存関係がないため、含まれて [*いる*](/sql/relational-databases/databases/contained-databases) と見なされます。</span><span class="sxs-lookup"><span data-stu-id="f467a-235">The database is considered [*contained*](/sql/relational-databases/databases/contained-databases) as it has no configuration dependencies on the underlying database server.</span></span>
  
- <span data-ttu-id="f467a-236">[Managed Instance](/azure/sql-database/sql-database-managed-instance)は、オンプレミスの SQL Server とほぼ100% の互換性を提供する、Microsoft SQL Server データベースエンジンの完全に管理されたインスタンスです。</span><span class="sxs-lookup"><span data-stu-id="f467a-236">A [Managed Instance](/azure/sql-database/sql-database-managed-instance) is a fully managed instance of the Microsoft SQL Server Database Engine that provides near-100% compatibility with an on-premises SQL Server.</span></span> <span data-ttu-id="f467a-237">このオプションは、35 TB までの大規模なデータベースをサポートしており、分離性を高めるために [Azure Virtual Network](/azure/virtual-network/virtual-networks-overview) に配置されています。</span><span class="sxs-lookup"><span data-stu-id="f467a-237">This option supports larger databases, up to 35 TB and is placed in an [Azure Virtual Network](/azure/virtual-network/virtual-networks-overview) for better isolation.</span></span>

- <span data-ttu-id="f467a-238">[Azure SQL Database サーバーレス](/azure/sql-database/sql-database-serverless) は、ワークロードの需要に基づいて自動的にスケーリングする単一データベースのコンピューティング層です。</span><span class="sxs-lookup"><span data-stu-id="f467a-238">[Azure SQL Database serverless](/azure/sql-database/sql-database-serverless) is a compute tier for a single database that automatically scales based on workload demand.</span></span> <span data-ttu-id="f467a-239">1秒あたりに使用されたコンピューティングの量に対してのみ課金されます。</span><span class="sxs-lookup"><span data-stu-id="f467a-239">It bills only for the amount of compute used per second.</span></span> <span data-ttu-id="f467a-240">サービスは、断続的で予測できない使用パターンを持つワークロードに適しており、非アクティブな状態が一定期間含まれています。</span><span class="sxs-lookup"><span data-stu-id="f467a-240">The service is well suited for workloads with intermittent, unpredictable usage patterns, interspersed with periods of inactivity.</span></span> <span data-ttu-id="f467a-241">また、サーバーレスコンピューティング層は、非アクティブ期間中に自動的にデータベースを一時停止して、ストレージの料金のみが課金されるようにします。</span><span class="sxs-lookup"><span data-stu-id="f467a-241">The serverless compute tier also automatically pauses databases during inactive periods so that only storage charges are billed.</span></span> <span data-ttu-id="f467a-242">アクティビティが戻ると自動的に再開されます。</span><span class="sxs-lookup"><span data-stu-id="f467a-242">It automatically resumes when activity returns.</span></span>

<span data-ttu-id="f467a-243">Azure では、従来の Microsoft SQL Server スタックを超えて、3つの一般的なオープンソースデータベースのマネージバージョンも機能します。</span><span class="sxs-lookup"><span data-stu-id="f467a-243">Beyond the traditional Microsoft SQL Server stack, Azure also features managed versions of three popular open-source databases.</span></span>

## <a name="open-source-databases-in-azure"></a><span data-ttu-id="f467a-244">Azure でのオープンソースデータベース</span><span class="sxs-lookup"><span data-stu-id="f467a-244">Open-source databases in Azure</span></span>

<span data-ttu-id="f467a-245">オープンソースのリレーショナルデータベースは、クラウドネイティブアプリケーションでよく選択されています。</span><span class="sxs-lookup"><span data-stu-id="f467a-245">Open-source relational databases have become a popular choice for cloud-native applications.</span></span> <span data-ttu-id="f467a-246">多くの企業は、特にコストを削減するために、商用データベース製品よりも優先しています。</span><span class="sxs-lookup"><span data-stu-id="f467a-246">Many enterprises favor them over commercial database products, especially for cost savings.</span></span> <span data-ttu-id="f467a-247">多くの開発チームは、柔軟性、コミュニティによる開発、ツールと拡張機能のエコシステムをご利用いただけます。</span><span class="sxs-lookup"><span data-stu-id="f467a-247">Many development teams enjoy their flexibility, community-backed development, and ecosystem of tools and extensions.</span></span> <span data-ttu-id="f467a-248">オープンソースデータベースは、複数のクラウドプロバイダーにデプロイできるので、"ベンダーのロックイン" の問題を最小限に抑えることができます。</span><span class="sxs-lookup"><span data-stu-id="f467a-248">Open-source databases can be deployed across multiple cloud providers, helping minimize the concern of "vendor lock-in."</span></span>

<span data-ttu-id="f467a-249">開発者は、任意のオープンソースデータベースを Azure VM 上で簡単に自己ホストできます。</span><span class="sxs-lookup"><span data-stu-id="f467a-249">Developers can easily self-host any open-source database on an Azure VM.</span></span> <span data-ttu-id="f467a-250">この方法では、フルコントロールを提供しながら、データベースと VM の管理、監視、およびメンテナンスのためのフックを作成できます。</span><span class="sxs-lookup"><span data-stu-id="f467a-250">While providing full control, this approach puts you on the hook for the management, monitoring, and maintenance of the database and VM.</span></span>

<span data-ttu-id="f467a-251">ただし、Microsoft は、いくつかの一般的なオープンソースデータベースを *完全に管理* された dbaas サービスとして提供することにより、Azure を "オープンプラットフォーム" にする取り組みを継続します。</span><span class="sxs-lookup"><span data-stu-id="f467a-251">However, Microsoft continues its commitment to keeping Azure an “open platform” by offering several popular open-source databases as *fully managed* DBaaS services.</span></span>

### <a name="azure-database-for-mysql"></a><span data-ttu-id="f467a-252">Azure Database for MySQL</span><span class="sxs-lookup"><span data-stu-id="f467a-252">Azure Database for MySQL</span></span>

<span data-ttu-id="f467a-253">[MySQL](https://en.wikipedia.org/wiki/MySQL)  は、オープンソースのリレーショナルデータベースであり、[ランプソフトウェアスタック](https://en.wikipedia.org/wiki/LAMP_(software_bundle))上に構築されたアプリケーションの柱です。</span><span class="sxs-lookup"><span data-stu-id="f467a-253">[MySQL](https://en.wikipedia.org/wiki/MySQL) is an open-source relational database and a pillar for applications built on the [LAMP software stack](https://en.wikipedia.org/wiki/LAMP_(software_bundle)).</span></span> <span data-ttu-id="f467a-254">*読み取り負荷の高い*ワークロードでは、Facebook、Twitter、YouTube などの多くの大規模な組織で使用されています。</span><span class="sxs-lookup"><span data-stu-id="f467a-254">Widely chosen for *read heavy* workloads, it's used by many large organizations, including Facebook, Twitter, and YouTube.</span></span> <span data-ttu-id="f467a-255">Community edition は無料でご利用いただけますが、enterprise edition ではライセンス購入が必要です。</span><span class="sxs-lookup"><span data-stu-id="f467a-255">The community edition is available for free, while the enterprise edition requires a license purchase.</span></span> <span data-ttu-id="f467a-256">当初、1995年に作成された製品は、Sun Microsystems によって2008に購入されています。</span><span class="sxs-lookup"><span data-stu-id="f467a-256">Originally created in 1995, the product was purchased by Sun Microsystems in 2008.</span></span> <span data-ttu-id="f467a-257">Oracle は2010で Sun と MySQL を獲得しました。</span><span class="sxs-lookup"><span data-stu-id="f467a-257">Oracle acquired Sun and MySQL in 2010.</span></span>

<span data-ttu-id="f467a-258">[Azure Database for MySQL](https://azure.microsoft.com/services/mysql/) は、オープンソースの MySQL サーバーエンジンに基づく管理されたリレーショナルデータベースサービスです。</span><span class="sxs-lookup"><span data-stu-id="f467a-258">[Azure Database for MySQL](https://azure.microsoft.com/services/mysql/) is a managed relational database service based on the open-source MySQL Server engine.</span></span> <span data-ttu-id="f467a-259">MySQL Community edition を使用します。</span><span class="sxs-lookup"><span data-stu-id="f467a-259">It uses the MySQL Community edition.</span></span> <span data-ttu-id="f467a-260">Azure MySQL サーバーは、サービスの管理ポイントです。</span><span class="sxs-lookup"><span data-stu-id="f467a-260">The Azure MySQL server is the administrative point for the service.</span></span> <span data-ttu-id="f467a-261">これは、オンプレミスのデプロイに使用されるものと同じ MySQL サーバーエンジンです。</span><span class="sxs-lookup"><span data-stu-id="f467a-261">It's the same MySQL server engine used for on-premises deployments.</span></span> <span data-ttu-id="f467a-262">エンジンは、サーバーごとに1つのデータベース、またはリソースを共有するサーバーごとに複数のデータベースを作成できます。</span><span class="sxs-lookup"><span data-stu-id="f467a-262">The engine can create a single database per server or multiple databases per server that share resources.</span></span> <span data-ttu-id="f467a-263">新しいスキルを習得したり、仮想マシンを管理したりすることなく、同じオープンソースツールを使用してデータの管理を継続できます。</span><span class="sxs-lookup"><span data-stu-id="f467a-263">You can continue to manage data using the same open-source tools without having to learn new skills or manage virtual machines.</span></span>

### <a name="azure-database-for-mariadb"></a><span data-ttu-id="f467a-264">Azure Database for MariaDB</span><span class="sxs-lookup"><span data-stu-id="f467a-264">Azure Database for MariaDB</span></span>

<span data-ttu-id="f467a-265">[MariaDB](https://mariadb.com/) サーバーは、もう1つの一般的なオープンソースのデータベースサーバーです。</span><span class="sxs-lookup"><span data-stu-id="f467a-265">[MariaDB](https://mariadb.com/) Server is another popular open-source database server.</span></span> <span data-ttu-id="f467a-266">これは、MySQL を所有している Oracle 購入時の MySQL の *フォーク* として作成されました。</span><span class="sxs-lookup"><span data-stu-id="f467a-266">It was created as a *fork* of MySQL when Oracle purchased Sun Microsystems, who owned MySQL.</span></span> <span data-ttu-id="f467a-267">目的は、MariaDB がオープンソースのままになっていることを確認することでした。</span><span class="sxs-lookup"><span data-stu-id="f467a-267">The intent was to ensure that MariaDB remained open-source.</span></span> <span data-ttu-id="f467a-268">MariaDB は MySQL のフォークであるため、データとテーブルの定義は互換性があり、クライアントプロトコル、構造体、および Api は knit になります。</span><span class="sxs-lookup"><span data-stu-id="f467a-268">As MariaDB is a fork of MySQL, the data and table definitions are compatible, and the client protocols, structures, and APIs, are close-knit.</span></span>

<span data-ttu-id="f467a-269">MariaDB には強力なコミュニティがあり、多くの大企業で使用されています。</span><span class="sxs-lookup"><span data-stu-id="f467a-269">MariaDB has a strong community and is used by many large enterprises.</span></span> <span data-ttu-id="f467a-270">Oracle は MySQL を引き続き保持、強化、サポートしていますが、MariaDB foundation は MariaDB を管理して、製品とドキュメントに公開された投稿を可能にします。</span><span class="sxs-lookup"><span data-stu-id="f467a-270">While Oracle continues to maintain, enhance, and support MySQL, the MariaDB foundation manages MariaDB, allowing public contributions to the product and documentation.</span></span>

<span data-ttu-id="f467a-271">[Azure Database for MariaDB](https://azure.microsoft.com/services/mariadb/) は、Azure クラウドで完全に管理されたサービスとしてのリレーショナルデータベースです。</span><span class="sxs-lookup"><span data-stu-id="f467a-271">[Azure Database for MariaDB](https://azure.microsoft.com/services/mariadb/) is a fully managed relational database as a service in the Azure cloud.</span></span> <span data-ttu-id="f467a-272">このサービスは、MariaDB community edition サーバーエンジンをベースにしています。</span><span class="sxs-lookup"><span data-stu-id="f467a-272">The service is based on the MariaDB community edition server engine.</span></span> <span data-ttu-id="f467a-273">予測可能なパフォーマンスと動的なスケーラビリティを備えたミッションクリティカルなワークロードを処理できます。</span><span class="sxs-lookup"><span data-stu-id="f467a-273">It can handle mission-critical workloads with predictable performance and dynamic scalability.</span></span>

### <a name="azure-database-for-postgresql"></a><span data-ttu-id="f467a-274">Azure Database for PostgreSQL</span><span class="sxs-lookup"><span data-stu-id="f467a-274">Azure Database for PostgreSQL</span></span>

<span data-ttu-id="f467a-275">[PostgreSQL](https://www.postgresql.org/) は、30年を超えるアクティブな開発を含むオープンソースのリレーショナルデータベースです。</span><span class="sxs-lookup"><span data-stu-id="f467a-275">[PostgreSQL](https://www.postgresql.org/) is an open-source relational database with over 30 years of active development.</span></span> <span data-ttu-id="f467a-276">Postgresql は信頼性とデータの整合性を強力に評価しています。</span><span class="sxs-lookup"><span data-stu-id="f467a-276">PostgresSQL has a strong reputation for reliability and data integrity.</span></span> <span data-ttu-id="f467a-277">機能豊富な SQL に準拠しており、MySQL よりもパフォーマンスが高いと見なされます (特に、複雑なクエリや大量の書き込みがあるワークロードの場合)。</span><span class="sxs-lookup"><span data-stu-id="f467a-277">It’s feature rich, SQL compliant, and considered more performant than MySQL - especially for workloads with complex queries and heavy writes.</span></span> <span data-ttu-id="f467a-278">Apple、Red Hat、および富士通を含む多くの大企業は、PostgreSQL を使用して製品を構築しています。</span><span class="sxs-lookup"><span data-stu-id="f467a-278">Many large enterprises including Apple, Red Hat, and Fujitsu have built products using PostgreSQL.</span></span>

<span data-ttu-id="f467a-279">[Azure Database for PostgreSQL](https://azure.microsoft.com/services/postgresql/) は、オープンソースの Postgres データベースエンジンに基づいた、完全に管理されたリレーショナルデータベースサービスです。</span><span class="sxs-lookup"><span data-stu-id="f467a-279">[Azure Database for PostgreSQL](https://azure.microsoft.com/services/postgresql/) is a fully managed relational database service, based on the open-source Postgres database engine.</span></span> <span data-ttu-id="f467a-280">このサービスでは、C++、Java、Python、Node、C、PHP など、多くの開発プラットフォームがサポートされてい \# ます。</span><span class="sxs-lookup"><span data-stu-id="f467a-280">The service supports many development platforms, including C++, Java, Python, Node, C\#, and PHP.</span></span> <span data-ttu-id="f467a-281">[コマンドラインインターフェイス](https://datamigration.microsoft.com/scenario/postgresql-to-azurepostgresql?step=1)ツールまたは Azure データ移行サービスを使用して、PostgreSQL データベースを移行することができます。</span><span class="sxs-lookup"><span data-stu-id="f467a-281">You can migrate PostgreSQL databases to it using the [command-line interface](https://datamigration.microsoft.com/scenario/postgresql-to-azurepostgresql?step=1) tool or Azure Data Migration Service.</span></span>

<span data-ttu-id="f467a-282">Azure Database for PostgreSQL には、次の2つの展開オプションがあります。</span><span class="sxs-lookup"><span data-stu-id="f467a-282">Azure Database for PostgreSQL is available with two deployment options:</span></span>

- <span data-ttu-id="f467a-283">[単一サーバー](/azure/postgresql/concepts-servers)配置オプションは、複数のデータベースを展開できる複数のデータベースの中央管理ポイントです。</span><span class="sxs-lookup"><span data-stu-id="f467a-283">The [Single Server](/azure/postgresql/concepts-servers) deployment option is a central administrative point for multiple databases to which you can deploy many databases.</span></span> <span data-ttu-id="f467a-284">価格は、コアとストレージに基づいてサーバーごとに構造化されています。</span><span class="sxs-lookup"><span data-stu-id="f467a-284">The pricing is structured per-server based upon cores and storage.</span></span>

- <span data-ttu-id="f467a-285">[ハイパースケール (Citus) オプション](https://azure.microsoft.com/blog/get-high-performance-scaling-for-your-azure-database-workloads-with-hyperscale/)は、Citus データテクノロジを利用しています。</span><span class="sxs-lookup"><span data-stu-id="f467a-285">The [Hyperscale (Citus) option](https://azure.microsoft.com/blog/get-high-performance-scaling-for-your-azure-database-workloads-with-hyperscale/) is powered by Citus Data technology.</span></span> <span data-ttu-id="f467a-286">高パフォーマンスを実現するために、1つのデータベースを数百のノードにわたって *水平方向にスケーリング* することで、パフォーマンスとスケールを高速にすることができます。</span><span class="sxs-lookup"><span data-stu-id="f467a-286">It enables high performance by *horizontally scaling* a single database across hundreds of nodes to deliver fast performance and scale.</span></span> <span data-ttu-id="f467a-287">このオプションを使用すると、エンジンはメモリにより多くのデータを格納し、数百のノードにわたってクエリを並列化して、データのインデックス作成を高速化できます。</span><span class="sxs-lookup"><span data-stu-id="f467a-287">This option allows the engine to fit more data in memory, parallelize queries across hundreds of nodes, and index data faster.</span></span>

## <a name="nosql-data-in-azure"></a><span data-ttu-id="f467a-288">Azure でのデータの NoSQL</span><span class="sxs-lookup"><span data-stu-id="f467a-288">NoSQL data in Azure</span></span>

<span data-ttu-id="f467a-289">Cosmos DB は、Azure クラウドで完全に管理された、グローバルに分散された NoSQL データベースサービスです。</span><span class="sxs-lookup"><span data-stu-id="f467a-289">Cosmos DB is a fully managed, globally distributed NoSQL database service in the Azure cloud.</span></span> <span data-ttu-id="f467a-290">これは世界中の多数の大企業で採用されており、Coca-Cola、Skype、ExxonMobil、Liberty 相互などが含まれています。</span><span class="sxs-lookup"><span data-stu-id="f467a-290">It has been adopted by many large companies across the world,  including Coca-Cola, Skype, ExxonMobil, and Liberty Mutual.</span></span>

<span data-ttu-id="f467a-291">サービスが世界中のどこからでも高速な応答を必要とする場合、高可用性、または柔軟なスケーラビリティを実現するには、Cosmos DB が最適です。</span><span class="sxs-lookup"><span data-stu-id="f467a-291">If your services require fast response from anywhere in the world, high availability, or elastic scalability, Cosmos DB is a great choice.</span></span> <span data-ttu-id="f467a-292">図5-12 に Cosmos DB を示します。</span><span class="sxs-lookup"><span data-stu-id="f467a-292">Figure 5-12 shows Cosmos DB.</span></span>

![Cosmos DB の概要](./media/cosmos-db-overview.png)

<span data-ttu-id="f467a-294">**図 5-12**: Cosmos DB の概要</span><span class="sxs-lookup"><span data-stu-id="f467a-294">**Figure 5-12**: Overview of Cosmos DB</span></span>

<span data-ttu-id="f467a-295">前の図は、Cosmos DB で使用できる組み込みのクラウドネイティブ機能の多くを示しています。</span><span class="sxs-lookup"><span data-stu-id="f467a-295">The previous figure presents many of the built-in cloud-native capabilities available in Cosmos DB.</span></span> <span data-ttu-id="f467a-296">このセクションでは、詳しく見ていきます。</span><span class="sxs-lookup"><span data-stu-id="f467a-296">In this section, we’ll take a closer look at them.</span></span>

### <a name="global-support"></a><span data-ttu-id="f467a-297">グローバル サポート</span><span class="sxs-lookup"><span data-stu-id="f467a-297">Global support</span></span>

<span data-ttu-id="f467a-298">クラウドネイティブアプリケーションは、多くの場合グローバルな対象ユーザーを持ち、グローバルなスケールを必要とします。</span><span class="sxs-lookup"><span data-stu-id="f467a-298">Cloud-native applications often have a global audience and require global scale.</span></span>

<span data-ttu-id="f467a-299">Cosmos データベースをリージョン間または世界中に分散し、データをユーザーの近くに配置し、応答時間を短縮し、待機時間を短縮することができます。</span><span class="sxs-lookup"><span data-stu-id="f467a-299">You can distribute Cosmos databases across regions or around the world, placing data close to your users, improving response time, and reducing latency.</span></span> <span data-ttu-id="f467a-300">サービスを一時停止または再デプロイすることなく、リージョンのデータベースを追加または削除できます。</span><span class="sxs-lookup"><span data-stu-id="f467a-300">You can add or remove a database from a region without pausing or redeploying your services.</span></span> <span data-ttu-id="f467a-301">バックグラウンドでは、Cosmos DB は、構成されている各リージョンにデータを透過的にレプリケートします。</span><span class="sxs-lookup"><span data-stu-id="f467a-301">In the background, Cosmos DB transparently replicates the data to each of the configured regions.</span></span>

<span data-ttu-id="f467a-302">Cosmos DB は、グローバルレベルで [アクティブ/アクティブ](https://kemptechnologies.com/white-papers/unfog-confusion-active-passive-activeactive-load-balancing/) クラスタリングをサポートしているため、 *書き込みと読み取りの両方*をサポートするようにデータベースリージョンを構成できます。</span><span class="sxs-lookup"><span data-stu-id="f467a-302">Cosmos DB supports [active/active](https://kemptechnologies.com/white-papers/unfog-confusion-active-passive-activeactive-load-balancing/) clustering at the global level, enabling you to configure any of your database regions to support *both writes and reads*.</span></span>

<span data-ttu-id="f467a-303">[マルチマスター](/azure/cosmos-db/multi-master-benefits)プロトコルは、次の機能を有効にする Cosmos DB の重要な機能です。</span><span class="sxs-lookup"><span data-stu-id="f467a-303">The [Multi-Master](/azure/cosmos-db/multi-master-benefits) protocol is an important feature in Cosmos DB that enables the following functionality:</span></span>

- <span data-ttu-id="f467a-304">無制限でエラスティックな書き込みと読み取りのスケーラビリティ。</span><span class="sxs-lookup"><span data-stu-id="f467a-304">Unlimited elastic write and read scalability.</span></span>

- <span data-ttu-id="f467a-305">全世界での 99.999% の読み取りおよび書き込みの可用性。</span><span class="sxs-lookup"><span data-stu-id="f467a-305">99.999% read and write availability all around the world.</span></span>

- <span data-ttu-id="f467a-306">99 パーセンタイルで 10 ミリ秒未満の処理性能が保証された読み取りと書き込み。</span><span class="sxs-lookup"><span data-stu-id="f467a-306">Guaranteed reads and writes served in less than 10 milliseconds at the 99th percentile.</span></span>

<span data-ttu-id="f467a-307">Cosmos DB [マルチホーム api](/azure/cosmos-db/distribute-data-globally)を使用すると、マイクロサービスは最も近い Azure リージョンを自動的に認識し、そのリージョンに要求を送信します。</span><span class="sxs-lookup"><span data-stu-id="f467a-307">With the Cosmos DB [Multi-Homing APIs](/azure/cosmos-db/distribute-data-globally), your microservice is automatically aware of the nearest Azure region and sends requests to it.</span></span> <span data-ttu-id="f467a-308">最も近いリージョンは、構成を変更せずに Cosmos DB によって識別されます。</span><span class="sxs-lookup"><span data-stu-id="f467a-308">The nearest region is identified by Cosmos DB without any configuration changes.</span></span> <span data-ttu-id="f467a-309">リージョンが使用できなくなった場合、マルチホーム機能は、次に最も近い利用可能なリージョンに自動的に要求をルーティングします。</span><span class="sxs-lookup"><span data-stu-id="f467a-309">Should a region become unavailable, the Multi-Homing feature will automatically route requests to the next nearest available region.</span></span>

### <a name="multi-model-support"></a><span data-ttu-id="f467a-310">マルチモデルサポート</span><span class="sxs-lookup"><span data-stu-id="f467a-310">Multi-model support</span></span>

<span data-ttu-id="f467a-311">モノリシックアプリケーションをクラウドネイティブアーキテクチャに基幹する場合、開発チームはオープンソースの NoSQL データストアの移行が必要になることがあります。</span><span class="sxs-lookup"><span data-stu-id="f467a-311">When replatforming monolithic applications to a cloud-native architecture, development teams sometimes have to migrate open-source, NoSQL data stores.</span></span> <span data-ttu-id="f467a-312">Cosmos DB は、その *マルチモデル* データプラットフォームを使用して、これらの NoSQL データストアへの投資を維持するのに役立ちます。</span><span class="sxs-lookup"><span data-stu-id="f467a-312">Cosmos DB can help you preserve your investment in these NoSQL datastores with its *multi-model* data platform.</span></span> <span data-ttu-id="f467a-313">次の表は、サポートされている NoSQL [互換性 api](https://www.wikiwand.com/en/Cosmos_DB)を示しています。</span><span class="sxs-lookup"><span data-stu-id="f467a-313">The following table shows the supported NoSQL [compatibility APIs](https://www.wikiwand.com/en/Cosmos_DB).</span></span>

| <span data-ttu-id="f467a-314">プロバイダー</span><span class="sxs-lookup"><span data-stu-id="f467a-314">Provider</span></span> | <span data-ttu-id="f467a-315">説明</span><span class="sxs-lookup"><span data-stu-id="f467a-315">Description</span></span>  |
| :-------- | :-------- |
| <span data-ttu-id="f467a-316">SQL API</span><span class="sxs-lookup"><span data-stu-id="f467a-316">SQL API</span></span> | <span data-ttu-id="f467a-317">JSON ドキュメントと SQL ベースのクエリをサポートする独自の API</span><span class="sxs-lookup"><span data-stu-id="f467a-317">Proprietary API that supports JSON documents and SQL-based queries</span></span> |
| <span data-ttu-id="f467a-318">Mongo DB API</span><span class="sxs-lookup"><span data-stu-id="f467a-318">Mongo DB API</span></span> | <span data-ttu-id="f467a-319">Mongo DB Api と JSON ドキュメントをサポートしています</span><span class="sxs-lookup"><span data-stu-id="f467a-319">Supports Mongo DB APIs and JSON documents</span></span>|
| <span data-ttu-id="f467a-320">Gremlin API</span><span class="sxs-lookup"><span data-stu-id="f467a-320">Gremlin API</span></span> | <span data-ttu-id="f467a-321">グラフベースのノードとエッジデータ表現を使用して、グリーン化 API をサポートします</span><span class="sxs-lookup"><span data-stu-id="f467a-321">Supports Gremlin API with graph-based nodes and edge data representations</span></span> |
| <span data-ttu-id="f467a-322">Cassandra API</span><span class="sxs-lookup"><span data-stu-id="f467a-322">Cassandra API</span></span> | <span data-ttu-id="f467a-323">Wide 列のデータ表現で Casandra API をサポート</span><span class="sxs-lookup"><span data-stu-id="f467a-323">Supports Casandra API for wide-column data representations</span></span> |  
| <span data-ttu-id="f467a-324">テーブル API</span><span class="sxs-lookup"><span data-stu-id="f467a-324">Table API</span></span>  | <span data-ttu-id="f467a-325">Premium の機能強化による Azure Table Storage のサポート</span><span class="sxs-lookup"><span data-stu-id="f467a-325">Supports Azure Table Storage with premium enhancements</span></span> |  
| <span data-ttu-id="f467a-326">etcd API</span><span class="sxs-lookup"><span data-stu-id="f467a-326">etcd API</span></span> | <span data-ttu-id="f467a-327">Azure Kubernetes Service クラスターのバッキングストアとして Cosmos DB を有効にします</span><span class="sxs-lookup"><span data-stu-id="f467a-327">Enables Cosmos DB as a backing store for Azure Kubernetes Service clusters</span></span> |

<span data-ttu-id="f467a-328">開発チームは、データまたはコードへの変更を最小限に抑えながら、既存の Mongo、Cassandra、またはのデータベースを Cosmos DB に移行できます。</span><span class="sxs-lookup"><span data-stu-id="f467a-328">Development teams can migrate existing Mongo, Gremlin, or Cassandra databases into Cosmos DB with minimal changes to data or code.</span></span> <span data-ttu-id="f467a-329">新しいアプリでは、開発チームはオープンソースオプションと組み込みの SQL API モデルのいずれかを選択できます。</span><span class="sxs-lookup"><span data-stu-id="f467a-329">For new apps, development teams can choose among open-source options or the built-in SQL API model.</span></span>

> <span data-ttu-id="f467a-330">内部的には、Cosmos はプリミティブデータ型で構成された単純な構造体形式でデータを格納します。</span><span class="sxs-lookup"><span data-stu-id="f467a-330">Internally, Cosmos stores the data in a simple struct format made up of primitive data types.</span></span> <span data-ttu-id="f467a-331">各要求に対して、データベースエンジンは、プリミティブデータを選択したモデル表現に変換します。</span><span class="sxs-lookup"><span data-stu-id="f467a-331">For each request, the database engine translates the primitive data into the model representation you've selected.</span></span>

<span data-ttu-id="f467a-332">前の表では、 [Table API](/azure/cosmos-db/table-introduction) オプションに注意してください。</span><span class="sxs-lookup"><span data-stu-id="f467a-332">In the previous table, note the [Table API](/azure/cosmos-db/table-introduction) option.</span></span> <span data-ttu-id="f467a-333">この API は、Azure Table Storage の進化です。</span><span class="sxs-lookup"><span data-stu-id="f467a-333">This API is an evolution of Azure Table Storage.</span></span> <span data-ttu-id="f467a-334">どちらも基になる同じテーブルモデルを共有しますが、Cosmos DB Table API では Azure Storage API では利用できない premium の機能強化が追加されています。</span><span class="sxs-lookup"><span data-stu-id="f467a-334">Both share the same underlying table model, but the Cosmos DB Table API adds premium enhancements not available in the Azure Storage API.</span></span> <span data-ttu-id="f467a-335">次の表は、の機能を比較したものです。</span><span class="sxs-lookup"><span data-stu-id="f467a-335">The following table contrasts the features.</span></span>

|  | <span data-ttu-id="f467a-336">Azure Table Storage</span><span class="sxs-lookup"><span data-stu-id="f467a-336">Azure Table Storage</span></span>  | <span data-ttu-id="f467a-337">Azure Cosmos DB</span><span class="sxs-lookup"><span data-stu-id="f467a-337">Azure Cosmos DB</span></span>  |
| :-------- | :-------- |:-------- |
| <span data-ttu-id="f467a-338">Latency</span><span class="sxs-lookup"><span data-stu-id="f467a-338">Latency</span></span> | <span data-ttu-id="f467a-339">速い</span><span class="sxs-lookup"><span data-stu-id="f467a-339">Fast</span></span> | <span data-ttu-id="f467a-340">世界中のどこでも読み取りと書き込みのために1桁のミリ秒の待機時間</span><span class="sxs-lookup"><span data-stu-id="f467a-340">Single-digit millisecond latency for reads and writes anywhere in the world</span></span> |
| <span data-ttu-id="f467a-341">スループット</span><span class="sxs-lookup"><span data-stu-id="f467a-341">Throughput</span></span> | <span data-ttu-id="f467a-342">テーブルあたりの操作数が2万の制限</span><span class="sxs-lookup"><span data-stu-id="f467a-342">Limit of 20,000 operations per table</span></span> | <span data-ttu-id="f467a-343">1000万テーブルあたりの操作数</span><span class="sxs-lookup"><span data-stu-id="f467a-343">10 Million operations per table</span></span> |
| <span data-ttu-id="f467a-344">グローバル分散</span><span class="sxs-lookup"><span data-stu-id="f467a-344">Global Distribution</span></span> | <span data-ttu-id="f467a-345">オプションの1つのセカンダリ読み取りリージョンを持つ単一リージョン</span><span class="sxs-lookup"><span data-stu-id="f467a-345">Single region with optional single secondary read region</span></span> | <span data-ttu-id="f467a-346">自動フェールオーバーを使用するすべてのリージョンへのターンキーディストリビューション</span><span class="sxs-lookup"><span data-stu-id="f467a-346">Turnkey distributions to all regions with automatic failover</span></span> |
| <span data-ttu-id="f467a-347">インデックス作成</span><span class="sxs-lookup"><span data-stu-id="f467a-347">Indexing</span></span> | <span data-ttu-id="f467a-348">パーティションキーと行キーのプロパティでのみ使用できます</span><span class="sxs-lookup"><span data-stu-id="f467a-348">Available for partition and row key properties only</span></span> | <span data-ttu-id="f467a-349">すべてのプロパティの自動インデックス作成</span><span class="sxs-lookup"><span data-stu-id="f467a-349">Automatic indexing of all properties</span></span> |
| <span data-ttu-id="f467a-350">価格</span><span class="sxs-lookup"><span data-stu-id="f467a-350">Pricing</span></span> | <span data-ttu-id="f467a-351">ストレージに基づく</span><span class="sxs-lookup"><span data-stu-id="f467a-351">Based on storage</span></span> | <span data-ttu-id="f467a-352">スループットに基づく</span><span class="sxs-lookup"><span data-stu-id="f467a-352">Based on throughput</span></span> |

<span data-ttu-id="f467a-353">Azure Table storage を使用するマイクロサービスは、Cosmos DB Table API に簡単に移行できます。</span><span class="sxs-lookup"><span data-stu-id="f467a-353">Microservices that consume Azure Table storage can easily migrate to the Cosmos DB Table API.</span></span> <span data-ttu-id="f467a-354">コードに変更を加える必要はありません。</span><span class="sxs-lookup"><span data-stu-id="f467a-354">No code changes are required.</span></span>

### <a name="tunable-consistency"></a><span data-ttu-id="f467a-355">調整可能な一貫性</span><span class="sxs-lookup"><span data-stu-id="f467a-355">Tunable consistency</span></span>

<span data-ttu-id="f467a-356">前の「 *リレーショナルと NoSQL* 」セクションでは、 *データの一貫性*について説明しました。</span><span class="sxs-lookup"><span data-stu-id="f467a-356">Earlier in the *Relational vs. NoSQL* section, we discussed the subject of *data consistency*.</span></span> <span data-ttu-id="f467a-357">データの整合性とは、データの *整合性* を意味します。</span><span class="sxs-lookup"><span data-stu-id="f467a-357">Data consistency refers to the *integrity* of your data.</span></span> <span data-ttu-id="f467a-358">分散データを使用したクラウドネイティブサービスはレプリケーションに依存しているため、読み取りの一貫性、可用性、待機時間の間に基本的なトレードオフを行う必要があります。</span><span class="sxs-lookup"><span data-stu-id="f467a-358">Cloud-native services with distributed data rely on replication and must make a fundamental tradeoff between read consistency, availability, and latency.</span></span>

<span data-ttu-id="f467a-359">多くの分散データベースにより、開発者は、強力な整合性と最終的な整合性の2つの整合性モデルを選択できます。</span><span class="sxs-lookup"><span data-stu-id="f467a-359">Most distributed databases allow developers to choose between two consistency models: strong consistency and eventual consistency.</span></span> <span data-ttu-id="f467a-360">*強力な一貫性* は、データプログラミングのゴールド標準です。</span><span class="sxs-lookup"><span data-stu-id="f467a-360">*Strong consistency* is the gold standard of data programmability.</span></span> <span data-ttu-id="f467a-361">これにより、すべてのデータベースコピーにわたって更新がレプリケートされるのを待機する待機時間がシステムにある場合でも、常に最新のデータが返されるようになります。</span><span class="sxs-lookup"><span data-stu-id="f467a-361">It guarantees that a query will always return the most current data - even if the system must incur latency waiting for an update to replicate across all database copies.</span></span> <span data-ttu-id="f467a-362">*最終的な整合性を確保*するように構成されたデータベースでは、データが最新のコピーではなくてもすぐにデータが返されます。</span><span class="sxs-lookup"><span data-stu-id="f467a-362">While a database configured for *eventual consistency* will return data immediately, even if that data isn't the most current copy.</span></span> <span data-ttu-id="f467a-363">後者のオプションを使用すると、可用性が向上し、スケールが向上し、パフォーマンスが向上します。</span><span class="sxs-lookup"><span data-stu-id="f467a-363">The latter option enables higher availability, greater scale, and increased performance.</span></span>

<span data-ttu-id="f467a-364">Azure Cosmos DB は、図5-13 に示すように、明確に定義された5つの [整合性モデル](/azure/cosmos-db/consistency-levels) を提供します。</span><span class="sxs-lookup"><span data-stu-id="f467a-364">Azure Cosmos DB offers five well-defined [consistency models](/azure/cosmos-db/consistency-levels) shown in Figure 5-13.</span></span>

![Cosmos DB の整合性グラフ](./media/cosmos-consistency-level-graph.png)

<span data-ttu-id="f467a-366">**図 5-13**: Cosmos DB の整合性レベル</span><span class="sxs-lookup"><span data-stu-id="f467a-366">**Figure 5-13**: Cosmos DB Consistency Levels</span></span>

 <span data-ttu-id="f467a-367">これらのオプションを使用すると、データの一貫性、可用性、およびパフォーマンスについて、正確な選択と詳細なトレードオフを行うことができます。</span><span class="sxs-lookup"><span data-stu-id="f467a-367">These options enable you to make precise choices and granular tradeoffs for consistency, availability, and the performance for your data.</span></span> <span data-ttu-id="f467a-368">レベルを次の表に示します。</span><span class="sxs-lookup"><span data-stu-id="f467a-368">The levels are presented in the following table.</span></span>

| <span data-ttu-id="f467a-369">整合性レベル</span><span class="sxs-lookup"><span data-stu-id="f467a-369">Consistency Level</span></span> | <span data-ttu-id="f467a-370">[説明]</span><span class="sxs-lookup"><span data-stu-id="f467a-370">Description</span></span>  |
| :-------- | :-------- |
| <span data-ttu-id="f467a-371">最終的</span><span class="sxs-lookup"><span data-stu-id="f467a-371">Eventual</span></span> | <span data-ttu-id="f467a-372">読み取りに対する順序の保証はありません。</span><span class="sxs-lookup"><span data-stu-id="f467a-372">No ordering guarantee for reads.</span></span> <span data-ttu-id="f467a-373">レプリカは最終的に収束されます。</span><span class="sxs-lookup"><span data-stu-id="f467a-373">Replicas will eventually converge.</span></span> |
| <span data-ttu-id="f467a-374">定数プレフィックス</span><span class="sxs-lookup"><span data-stu-id="f467a-374">Constant Prefix</span></span> | <span data-ttu-id="f467a-375">読み取りは依然として最終的に行われますが、データは書き込まれた順序で返されます。</span><span class="sxs-lookup"><span data-stu-id="f467a-375">Reads are still eventual, but data is returned in the ordering in which it is written.</span></span> |
| <span data-ttu-id="f467a-376">Session</span><span class="sxs-lookup"><span data-stu-id="f467a-376">Session</span></span> | <span data-ttu-id="f467a-377">現在のセッション中に書き込まれたデータを読み取ることができることを保証します。</span><span class="sxs-lookup"><span data-stu-id="f467a-377">Guarantees you can read any data written during the current session.</span></span> <span data-ttu-id="f467a-378">これは既定の整合性レベルです。</span><span class="sxs-lookup"><span data-stu-id="f467a-378">It is the default consistency level.</span></span> |
| <span data-ttu-id="f467a-379">有界整合性制約</span><span class="sxs-lookup"><span data-stu-id="f467a-379">Bounded Staleness</span></span> | <span data-ttu-id="f467a-380">指定した間隔で書き込みを読み取ります。</span><span class="sxs-lookup"><span data-stu-id="f467a-380">Reads trail writes by interval that you specify.</span></span> |  
| <span data-ttu-id="f467a-381">Strong</span><span class="sxs-lookup"><span data-stu-id="f467a-381">Strong</span></span>  | <span data-ttu-id="f467a-382">読み取りは、項目の最新のコミットバージョンを返すことが保証されます。</span><span class="sxs-lookup"><span data-stu-id="f467a-382">Reads are guaranteed to return most recent committed version of an item.</span></span> <span data-ttu-id="f467a-383">クライアントは、コミットされていないまたは部分的な読み取りを認識しません。</span><span class="sxs-lookup"><span data-stu-id="f467a-383">A client never sees an uncommitted or partial read.</span></span> |  

<span data-ttu-id="f467a-384">「 [9-ボール: Cosmos DB の整合性レベル](https://blog.jeremylikness.com/blog/2018-03-23_getting-behind-the-9ball-cosmosdb-consistency-levels/)」の記事では、Microsoft プログラムマネージャー Jeremy Likness が5つのモデルについての優れた説明を提供しています。</span><span class="sxs-lookup"><span data-stu-id="f467a-384">In the article [Getting Behind the 9-Ball: Cosmos DB Consistency Levels Explained](https://blog.jeremylikness.com/blog/2018-03-23_getting-behind-the-9ball-cosmosdb-consistency-levels/), Microsoft Program Manager Jeremy Likness provides an excellent explanation of the five models.</span></span>

### <a name="partitioning"></a><span data-ttu-id="f467a-385">パーティション分割</span><span class="sxs-lookup"><span data-stu-id="f467a-385">Partitioning</span></span>

<span data-ttu-id="f467a-386">自動 [パーティション分割](/azure/cosmos-db/partitioning-overview) を使用して、クラウドネイティブサービスのパフォーマンスニーズに合わせてデータベースをスケーリングする Azure Cosmos DB ます。</span><span class="sxs-lookup"><span data-stu-id="f467a-386">Azure Cosmos DB embraces automatic [partitioning](/azure/cosmos-db/partitioning-overview) to scale a database to meet the performance needs of your cloud-native services.</span></span>

<span data-ttu-id="f467a-387">データベース、コンテナー、およびアイテムを作成することによって、Cosmos DB データ内のデータを管理します。</span><span class="sxs-lookup"><span data-stu-id="f467a-387">You manage data in Cosmos DB data by creating databases, containers, and items.</span></span>

<span data-ttu-id="f467a-388">コンテナーは、Cosmos DB データベース内に存在し、スキーマに依存しないアイテムのグループを表します。</span><span class="sxs-lookup"><span data-stu-id="f467a-388">Containers live in a Cosmos DB database and represent a schema-agnostic grouping of items.</span></span> <span data-ttu-id="f467a-389">項目は、コンテナーに追加するデータです。</span><span class="sxs-lookup"><span data-stu-id="f467a-389">Items are the data that you add to the container.</span></span> <span data-ttu-id="f467a-390">ドキュメント、行、ノード、またはエッジとして表されます。</span><span class="sxs-lookup"><span data-stu-id="f467a-390">They're represented as documents, rows, nodes, or edges.</span></span> <span data-ttu-id="f467a-391">コンテナーに追加されたすべての項目には、自動的にインデックスが作成されます。</span><span class="sxs-lookup"><span data-stu-id="f467a-391">All items added to a container are automatically indexed.</span></span>

<span data-ttu-id="f467a-392">コンテナーをパーティション分割するために、項目は論理パーティションと呼ばれる個別のサブセットに分割されます。</span><span class="sxs-lookup"><span data-stu-id="f467a-392">To partition the container, items are divided into distinct subsets called logical partitions.</span></span> <span data-ttu-id="f467a-393">論理パーティションは、コンテナー内の各項目に関連付けられているパーティションキーの値に基づいて設定されます。</span><span class="sxs-lookup"><span data-stu-id="f467a-393">Logical partitions are populated based on the value of a partition key that is associated with each item in a container.</span></span> <span data-ttu-id="f467a-394">図5-14 は、パーティションキー値に基づく論理パーティションを持つ2つのコンテナーを示しています。</span><span class="sxs-lookup"><span data-stu-id="f467a-394">Figure 5-14 shows two containers each with a logical partition based on a partition key value.</span></span>

![Cosmos DB パーティション分割機構](./media/cosmos-db-partitioning.png)

<span data-ttu-id="f467a-396">**図 5-14**: Cosmos DB パーティション分割機構</span><span class="sxs-lookup"><span data-stu-id="f467a-396">**Figure 5-14**: Cosmos DB partitioning mechanics</span></span>

<span data-ttu-id="f467a-397">上の図では、各項目に ' city ' または ' 空港 ' のパーティションキーが含まれていることに注意してください。</span><span class="sxs-lookup"><span data-stu-id="f467a-397">Note in the  previous figure how each item includes a partition key of either ‘city’ or ‘airport’.</span></span> <span data-ttu-id="f467a-398">キーは、項目の論理パーティションを決定します。</span><span class="sxs-lookup"><span data-stu-id="f467a-398">The key determines the item’s logical partition.</span></span> <span data-ttu-id="f467a-399">都市コードを持つ項目は、左側のコンテナーと、空港コードを持つ項目が右側のコンテナーに割り当てられます。</span><span class="sxs-lookup"><span data-stu-id="f467a-399">Items with a city code are assigned to the container on the left, and items with an airport code, to the container on the right.</span></span> <span data-ttu-id="f467a-400">パーティションキー値と ID 値を組み合わせると、アイテムのインデックスが作成され、アイテムが一意に識別されます。</span><span class="sxs-lookup"><span data-stu-id="f467a-400">Combining the partition key value with the ID value creates an item's index, which uniquely identifies the item.</span></span>

<span data-ttu-id="f467a-401">内部的には、Cosmos DB によって、コンテナーのスケーラビリティとパフォーマンスのニーズを満たすために、物理パーティション上の [論理パーティション](/azure/cosmos-db/partition-data) の配置が自動的に管理されます。</span><span class="sxs-lookup"><span data-stu-id="f467a-401">Internally, Cosmos DB automatically manages the placement of [logical partitions](/azure/cosmos-db/partition-data) on physical partitions to satisfy the scalability and performance needs of the container.</span></span> <span data-ttu-id="f467a-402">アプリケーションのスループットと記憶域の要件が増加するにつれて、Azure Cosmos DB、より多くのサーバーに対して論理パーティションを再分配します。</span><span class="sxs-lookup"><span data-stu-id="f467a-402">As application throughput and storage requirements  increase, Azure Cosmos DB redistributes logical partitions across a greater number of servers.</span></span> <span data-ttu-id="f467a-403">再配布操作は Cosmos DB によって管理され、中断やダウンタイムなしで呼び出されます。</span><span class="sxs-lookup"><span data-stu-id="f467a-403">Redistribution operations are managed by Cosmos DB and invoked without interruption or downtime.</span></span>

## <a name="newsql-databases"></a><span data-ttu-id="f467a-404">NewSQL データベース</span><span class="sxs-lookup"><span data-stu-id="f467a-404">NewSQL databases</span></span>

<span data-ttu-id="f467a-405">*Newsql*  は、NoSQL の分散型スケーラビリティとリレーショナルデータベースの ACID 保証を組み合わせた、新たに導入されたデータベーステクノロジです。</span><span class="sxs-lookup"><span data-stu-id="f467a-405">*NewSQL* is an emerging database technology that combines the distributed scalability of NoSQL with the ACID guarantees of a relational database.</span></span> <span data-ttu-id="f467a-406">NewSQL データベースは、分散環境全体で大量のデータを処理する必要があるビジネスシステムにとって重要であり、完全なトランザクションサポートと ACID 準拠を備えています。</span><span class="sxs-lookup"><span data-stu-id="f467a-406">NewSQL databases are important for business systems that must process high-volumes of data, across distributed environments, with full transactional support and ACID compliance.</span></span> <span data-ttu-id="f467a-407">NoSQL データベースでは大規模なスケーラビリティを実現できますが、データの整合性は保証されません。</span><span class="sxs-lookup"><span data-stu-id="f467a-407">While a NoSQL database can provide massive scalability, it does not guarantee data consistency.</span></span> <span data-ttu-id="f467a-408">一貫性のないデータによる断続的な問題は、開発チームに負担をかける可能性があります。</span><span class="sxs-lookup"><span data-stu-id="f467a-408">Intermittent problems from inconsistent data can place a burden on the development team.</span></span> <span data-ttu-id="f467a-409">開発者は、データの不整合によって発生する問題を管理するために、マイクロサービスコードにセーフガードを構築する必要があります。</span><span class="sxs-lookup"><span data-stu-id="f467a-409">Developers must construct safeguards into their microservice code to manage problems caused by inconsistent data.</span></span>

<span data-ttu-id="f467a-410">Cloud Native Computing Foundation (CNCF) には、いくつかの NewSQL database プロジェクトが用意されています。</span><span class="sxs-lookup"><span data-stu-id="f467a-410">The Cloud Native Computing Foundation (CNCF) features several NewSQL database projects.</span></span>

| <span data-ttu-id="f467a-411">Project</span><span class="sxs-lookup"><span data-stu-id="f467a-411">Project</span></span> | <span data-ttu-id="f467a-412">特性</span><span class="sxs-lookup"><span data-stu-id="f467a-412">Characteristics</span></span> |
| :-------- | :-------- |
| <span data-ttu-id="f467a-413">Cockroach DB</span><span class="sxs-lookup"><span data-stu-id="f467a-413">Cockroach DB</span></span> |<span data-ttu-id="f467a-414">グローバルに拡張できる ACID 準拠のリレーショナルデータベース。</span><span class="sxs-lookup"><span data-stu-id="f467a-414">An ACID-compliant, relational database that scales globally.</span></span> <span data-ttu-id="f467a-415">クラスターに新しいノードを追加すると、CockroachDB はインスタンスや地域間でデータを分散します。</span><span class="sxs-lookup"><span data-stu-id="f467a-415">Add a new node to a cluster and CockroachDB takes care of balancing the data across instances and geographies.</span></span> <span data-ttu-id="f467a-416">信頼性を確保するために、レプリカの作成、管理、および配布を行います。</span><span class="sxs-lookup"><span data-stu-id="f467a-416">It creates, manages, and distributes replicas to ensure reliability.</span></span> <span data-ttu-id="f467a-417">オープンソースであり、無料で利用できます。</span><span class="sxs-lookup"><span data-stu-id="f467a-417">It’s open source and freely available.</span></span>  |
| <span data-ttu-id="f467a-418">TiDB</span><span class="sxs-lookup"><span data-stu-id="f467a-418">TiDB</span></span> | <span data-ttu-id="f467a-419">ハイブリッドトランザクションおよび分析処理 (HTAP) ワークロードをサポートするオープンソースのデータベース。</span><span class="sxs-lookup"><span data-stu-id="f467a-419">An open-source database that supports Hybrid Transactional and Analytical Processing (HTAP) workloads.</span></span> <span data-ttu-id="f467a-420">MySQL と互換性があり、水平方向のスケーラビリティ、強力な一貫性、高可用性を備えています。</span><span class="sxs-lookup"><span data-stu-id="f467a-420">It is MySQL-compatible and features horizontal scalability, strong consistency, and high availability.</span></span>  <span data-ttu-id="f467a-421">TiDB は、MySQL サーバーのように機能します。</span><span class="sxs-lookup"><span data-stu-id="f467a-421">TiDB acts like a MySQL server.</span></span> <span data-ttu-id="f467a-422">アプリケーションに広範なコード変更を加えることなく、既存の MySQL クライアントライブラリを引き続き使用することができます。</span><span class="sxs-lookup"><span data-stu-id="f467a-422">You can continue to use existing MySQL client libraries, without requiring extensive code changes to your application.</span></span> |
| <span data-ttu-id="f467a-423">YugabyteDB</span><span class="sxs-lookup"><span data-stu-id="f467a-423">YugabyteDB</span></span> | <span data-ttu-id="f467a-424">オープンソースの高パフォーマンスな分散 SQL データベース。</span><span class="sxs-lookup"><span data-stu-id="f467a-424">An open source, high-performance, distributed SQL database.</span></span> <span data-ttu-id="f467a-425">クエリの待機時間の短縮、障害に対する回復力、およびグローバルデータ分散がサポートされています。</span><span class="sxs-lookup"><span data-stu-id="f467a-425">It supports low query latency, resilience against failures, and global data distribution.</span></span> <span data-ttu-id="f467a-426">YugabyteDB は PostgressSQL と互換性があり、スケールアウト RDBMS とインターネットスケールの OLTP ワークロードを処理します。</span><span class="sxs-lookup"><span data-stu-id="f467a-426">YugabyteDB is PostgressSQL-compatible and handles scale-out RDBMS and internet-scale OLTP workloads.</span></span> <span data-ttu-id="f467a-427">製品は NoSQL もサポートしており、Cassandra と互換性があります。</span><span class="sxs-lookup"><span data-stu-id="f467a-427">The product also supports NoSQL and is compatible with Cassandra.</span></span> |
|<span data-ttu-id="f467a-428">Vitess</span><span class="sxs-lookup"><span data-stu-id="f467a-428">Vitess</span></span> | <span data-ttu-id="f467a-429">Vitess は、MySQL インスタンスの大規模なクラスターをデプロイ、スケーリング、および管理するためのデータベースソリューションです。</span><span class="sxs-lookup"><span data-stu-id="f467a-429">Vitess is a database solution for deploying, scaling, and managing large clusters of MySQL instances.</span></span> <span data-ttu-id="f467a-430">パブリックまたはプライベートのクラウドアーキテクチャで実行できます。</span><span class="sxs-lookup"><span data-stu-id="f467a-430">It can run in a public or private cloud architecture.</span></span> <span data-ttu-id="f467a-431">Vitess は、垂直方向と水平方向のシャーディングサポートの両方で、多くの重要な MySQL 機能と機能を組み合わせて拡張します。</span><span class="sxs-lookup"><span data-stu-id="f467a-431">Vitess combines and extends many important MySQL features and features both vertical and horizontal sharding support.</span></span> <span data-ttu-id="f467a-432">YouTube により、Vitess は2011以降のすべての YouTube データベーストラフィックを処理していました。</span><span class="sxs-lookup"><span data-stu-id="f467a-432">Originated by YouTube, Vitess has been serving all YouTube database traffic since 2011.</span></span> |

<span data-ttu-id="f467a-433">前の図のオープンソースプロジェクトは、クラウドネイティブコンピューティングファンデーションから入手できます。</span><span class="sxs-lookup"><span data-stu-id="f467a-433">The open-source projects in the previous figure are available from the Cloud Native Computing Foundation.</span></span> <span data-ttu-id="f467a-434">3つのオファリングは、.NET Core サポートを含む完全なデータベース製品です。</span><span class="sxs-lookup"><span data-stu-id="f467a-434">Three of the offerings are full database products, which include .NET Core support.</span></span> <span data-ttu-id="f467a-435">もう1つは、Vitess のデータベースクラスターシステムで、MySQL インスタンスの大規模なクラスターを水平方向にスケーリングします。</span><span class="sxs-lookup"><span data-stu-id="f467a-435">The other, Vitess, is a database clustering system that horizontally scales large clusters of MySQL instances.</span></span>

<span data-ttu-id="f467a-436">NewSQL データベースの主な設計目標は、プラットフォームの回復性とスケーラビリティを利用して、Kubernetes でネイティブに動作することです。</span><span class="sxs-lookup"><span data-stu-id="f467a-436">A key design goal for NewSQL databases is to work natively in Kubernetes, taking advantage of the platform's resiliency and scalability.</span></span>

<span data-ttu-id="f467a-437">NewSQL データベースは、基になる仮想マシンをすぐに再起動または再スケジュールできる、短期クラウド環境での使用を目的として設計されています。</span><span class="sxs-lookup"><span data-stu-id="f467a-437">NewSQL databases are designed to thrive in ephemeral cloud environments where underlying virtual machines can be restarted or rescheduled at a moment’s notice.</span></span> <span data-ttu-id="f467a-438">データベースは、データ損失やダウンタイムなしでノード障害が発生しないように設計されています。</span><span class="sxs-lookup"><span data-stu-id="f467a-438">The databases are designed to survive node failures without data loss nor downtime.</span></span> <span data-ttu-id="f467a-439">たとえば、CockroachDB は、クラスター内のノード間でデータの一貫性のある3つのレプリカを維持することによって、コンピューターの損失に耐えられる可能性があります。</span><span class="sxs-lookup"><span data-stu-id="f467a-439">CockroachDB, for example, is able to survive a machine loss by maintaining three consistent replicas of any data across the nodes in a cluster.</span></span>

<span data-ttu-id="f467a-440">Kubernetes は、 *サービス構成体* を使用して、1つの DNS エントリから、同じ newsql databases プロセスのグループに対してクライアントがアドレスを設定できるようにします。</span><span class="sxs-lookup"><span data-stu-id="f467a-440">Kubernetes uses a *Services construct* to allow a client to address a group of identical NewSQL databases processes from a single DNS entry.</span></span> <span data-ttu-id="f467a-441">データベースインスタンスと関連付けられているサービスのアドレスを分離することにより、既存のアプリケーションインスタンスに影響を及ぼすことなく拡張できます。</span><span class="sxs-lookup"><span data-stu-id="f467a-441">By decoupling the database instances from the address of the service with which it's associated, we can scale without disrupting existing application instances.</span></span> <span data-ttu-id="f467a-442">任意の時点で任意のサービスに要求を送信すると、常に同じ結果が得られます。</span><span class="sxs-lookup"><span data-stu-id="f467a-442">Sending a request to any service at a given time will always yield the same result.</span></span>

<span data-ttu-id="f467a-443">このシナリオでは、すべてのデータベースインスタンスが同じです。</span><span class="sxs-lookup"><span data-stu-id="f467a-443">In this scenario, all database instances are equal.</span></span> <span data-ttu-id="f467a-444">プライマリまたはセカンダリのリレーションシップはありません。</span><span class="sxs-lookup"><span data-stu-id="f467a-444">There are no primary or secondary relationships.</span></span> <span data-ttu-id="f467a-445">CockroachDB で検出された *コンセンサスレプリケーション* のような手法では、任意のデータベースノードが任意の要求を処理できます。</span><span class="sxs-lookup"><span data-stu-id="f467a-445">Techniques like *consensus replication* found in CockroachDB allow any database node to handle any request.</span></span> <span data-ttu-id="f467a-446">負荷分散要求を受信するノードにローカルで必要なデータがある場合は、すぐに応答します。</span><span class="sxs-lookup"><span data-stu-id="f467a-446">If the node that receives a load-balanced request has the data it needs locally, it responds immediately.</span></span> <span data-ttu-id="f467a-447">それ以外の場合、ノードはゲートウェイになり、適切なノードに要求を転送して正しい回答を取得します。</span><span class="sxs-lookup"><span data-stu-id="f467a-447">If not, the node becomes a gateway and forwards the request to the appropriate nodes to get the correct answer.</span></span> <span data-ttu-id="f467a-448">クライアントの観点から見ると、すべてのデータベースノードは同じです。つまり、1つの *論理* データベースとして表示され、単一コンピューターシステムの整合性が保証されます。これには、数十または数百のノードがバックグラウンドで動作しています。</span><span class="sxs-lookup"><span data-stu-id="f467a-448">From the client's perspective, every database node is the same: They appear as a single *logical* database with the consistency guarantees of a single-machine system, despite having dozens or even hundreds of nodes that are working behind the scenes.</span></span>

<span data-ttu-id="f467a-449">NewSQL データベースの背後にあるメカニズムの詳細については、「 [ダッシュ: 4 つのプロパティ (Kubernetes-ネイティブデータベース](https://thenewstack.io/dash-four-properties-of-kubernetes-native-databases/) )」を参照してください。</span><span class="sxs-lookup"><span data-stu-id="f467a-449">For a detailed look at the mechanics behind NewSQL databases, see the [DASH: Four Properties of Kubernetes-Native Databases](https://thenewstack.io/dash-four-properties-of-kubernetes-native-databases/) article.</span></span>

## <a name="data-migration-to-the-cloud"></a><span data-ttu-id="f467a-450">クラウドへのデータ移行</span><span class="sxs-lookup"><span data-stu-id="f467a-450">Data migration to the cloud</span></span>

<span data-ttu-id="f467a-451">時間のかかるタスクの1つは、データプラットフォーム間でデータを移行することです。</span><span class="sxs-lookup"><span data-stu-id="f467a-451">One of the more time-consuming tasks is migrating data from one data platform to another.</span></span> <span data-ttu-id="f467a-452">[Azure データ移行サービス](https://azure.microsoft.com/services/database-migration/)は、このような作業を迅速化するのに役立ちます。</span><span class="sxs-lookup"><span data-stu-id="f467a-452">The [Azure Data Migration Service](https://azure.microsoft.com/services/database-migration/) can help expedite such efforts.</span></span> <span data-ttu-id="f467a-453">最小限のダウンタイムで、複数の外部データベースソースから Azure データプラットフォームにデータを移行することができます。</span><span class="sxs-lookup"><span data-stu-id="f467a-453">It can migrate data from several external database sources into Azure Data platforms with minimal downtime.</span></span> <span data-ttu-id="f467a-454">ターゲットプラットフォームには、次のサービスが含まれます。</span><span class="sxs-lookup"><span data-stu-id="f467a-454">Target platforms include the following services:</span></span>

- <span data-ttu-id="f467a-455">Azure SQL データベース</span><span class="sxs-lookup"><span data-stu-id="f467a-455">Azure SQL Database</span></span>
- <span data-ttu-id="f467a-456">Azure Database for MySQL</span><span class="sxs-lookup"><span data-stu-id="f467a-456">Azure Database for MySQL</span></span>
- <span data-ttu-id="f467a-457">Azure Database for MariaDB</span><span class="sxs-lookup"><span data-stu-id="f467a-457">Azure Database for MariaDB</span></span>
- <span data-ttu-id="f467a-458">Azure Database for PostgreSQL</span><span class="sxs-lookup"><span data-stu-id="f467a-458">Azure Database for PostgreSQL</span></span>
- <span data-ttu-id="f467a-459">Cosmos DB</span><span class="sxs-lookup"><span data-stu-id="f467a-459">CosmosDB</span></span>
  
<span data-ttu-id="f467a-460">このサービスでは、小規模または大規模の移行を実行するために必要な変更を案内する推奨事項が提供されます。</span><span class="sxs-lookup"><span data-stu-id="f467a-460">The service provides recommendations to guide you through the changes required to execute a migration, both small or large.</span></span>

>[!div class="step-by-step"]
><span data-ttu-id="f467a-461">[前へ](distributed-data.md)
>[次へ](azure-caching.md)</span><span class="sxs-lookup"><span data-stu-id="f467a-461">[Previous](distributed-data.md)
[Next](azure-caching.md)</span></span>
