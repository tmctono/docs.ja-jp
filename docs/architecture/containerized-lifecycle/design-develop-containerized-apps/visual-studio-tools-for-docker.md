---
title: Windows 上の Visual Studio Tools for Docker
description: Visual Studio 2017 バージョン 15.7 以降で使用できる Docker ツールについて説明します。
ms.date: 08/06/2020
ms.custom: vs-dotnet
ms.openlocfilehash: 74cffaae5885a7079ec774b1e8c68241cddda99a
ms.sourcegitcommit: ef50c99928183a0bba75e07b9f22895cd4c480f8
ms.translationtype: HT
ms.contentlocale: ja-JP
ms.lasthandoff: 08/07/2020
ms.locfileid: "87915362"
---
# <a name="use-docker-tools-in-visual-studio-on-windows"></a><span data-ttu-id="90587-103">Windows 上の Visual Studio で Docker ツールを使用する</span><span class="sxs-lookup"><span data-stu-id="90587-103">Use Docker Tools in Visual Studio on Windows</span></span>

<span data-ttu-id="90587-104">Visual Studio 2017 バージョン 15.7 以降に含まれている Docker ツールを使用する場合の開発者ワークフローは、Visual Studio Code と Docker CLI の使用と似ています (実際、同じ Docker CLI に基づいています) が、より簡単に始めることができ、プロセスが簡単であり、ビルド、実行、および構成タスクの生産性を高めることができます。</span><span class="sxs-lookup"><span data-stu-id="90587-104">The developer workflow when using the Docker Tools included in Visual Studio 2017 version 15.7 and later, is similar to using Visual Studio Code and Docker CLI (in fact, it's based on the same Docker CLI), but it's easier to get started, simplifies the process, and provides greater productivity for the build, run, and compose tasks.</span></span> <span data-ttu-id="90587-105">また、Visual Studio の通常の `F5` キーと `Ctrl+F5` キーを使用してコンテナーを実行およびデバッグすることもできます。</span><span class="sxs-lookup"><span data-stu-id="90587-105">It can also run and debug your containers via the usual `F5` and `Ctrl+F5` keys from Visual Studio.</span></span> <span data-ttu-id="90587-106">コンテナーがソリューション レベルで同じ `docker-compose.yml` ファイルに定義されている場合は、ソリューション全体をデバッグすることもできます。</span><span class="sxs-lookup"><span data-stu-id="90587-106">You can even debug a whole solution if its containers are defined in the same `docker-compose.yml` file at the solution level.</span></span>

## <a name="configure-your-local-environment"></a><span data-ttu-id="90587-107">ローカル環境を構成する</span><span class="sxs-lookup"><span data-stu-id="90587-107">Configure your local environment</span></span>

<span data-ttu-id="90587-108">Docker for Windows の最新バージョンでは、次の参考ドキュメントで説明されているように、設定が簡単なので、Docker アプリケーションの開発がこれまでよりも簡単になりました。</span><span class="sxs-lookup"><span data-stu-id="90587-108">With the latest versions of Docker for Windows, it's easier than ever to develop Docker applications because the setup is straightforward, as explained in the following references.</span></span>

> [!TIP]
> <span data-ttu-id="90587-109">Docker for Windows のインストールの詳細については、(<https://docs.docker.com/docker-for-windows/>) を参照してください。</span><span class="sxs-lookup"><span data-stu-id="90587-109">To learn more about installing Docker for Windows, go to (<https://docs.docker.com/docker-for-windows/>).</span></span>

## <a name="docker-support-in-visual-studio"></a><span data-ttu-id="90587-110">Visual Studio での Docker サポート</span><span class="sxs-lookup"><span data-stu-id="90587-110">Docker support in Visual Studio</span></span>

<span data-ttu-id="90587-111">プロジェクトに追加できる Docker サポートには 2 つのレベルがあります。</span><span class="sxs-lookup"><span data-stu-id="90587-111">There are two levels of Docker support you can add to a project.</span></span> <span data-ttu-id="90587-112">ASP.NET Core プロジェクトでは、Docker サポートを有効にしてプロジェクトに `Dockerfile` ファイルを追加するだけです。</span><span class="sxs-lookup"><span data-stu-id="90587-112">In ASP.NET Core projects, you can just add a `Dockerfile` file to the project by enabling Docker support.</span></span> <span data-ttu-id="90587-113">次のレベルはコンテナー オーケストレーションのサポートです。(まだ存在しない場合は) `Dockerfile` をプロジェクトに追加し、ソリューション レベルで `docker-compose.yml` ファイルを追加します。</span><span class="sxs-lookup"><span data-stu-id="90587-113">The next level is container orchestration support, which adds a `Dockerfile` to the project (if it doesn't already exist) and a `docker-compose.yml` file at the solution level.</span></span> <span data-ttu-id="90587-114">Docker Compose によるコンテナー オーケストレーションのサポートは、Visual Studio 2017 バージョン 15.0 から 15.7 で既定で追加されています。</span><span class="sxs-lookup"><span data-stu-id="90587-114">Container orchestration support, via Docker Compose, is added by default in Visual Studio 2017 versions 15.0 to 15.7.</span></span> <span data-ttu-id="90587-115">コンテナー オーケストレーションのサポートは、Visual Studio 2017 バージョン 15.8 以降のオプトイン機能です。</span><span class="sxs-lookup"><span data-stu-id="90587-115">Container orchestration support is an opt-in feature in Visual Studio 2017 versions 15.8 or later.</span></span> <span data-ttu-id="90587-116">Visual Studio 2019 以降では、**Kubernetes/Helm** デプロイもサポートされています。</span><span class="sxs-lookup"><span data-stu-id="90587-116">Visual Studio 2019 and later supports **Kubernetes/Helm** deployment as well.</span></span>

<span data-ttu-id="90587-117">**[追加] > [Docker のサポート]** と **[追加] > [コンテナー オーケストレーター サポート]** コマンドは、**ソリューション エクスプローラー**の ASP.NET Core プロジェクトのプロジェクト ノードの右クリック メニュー (またはコンテキスト メニュー) にあります。図 4-31 を参照してください。</span><span class="sxs-lookup"><span data-stu-id="90587-117">The **Add > Docker Support** and **Add > Container Orchestrator Support** commands are located on the right-click menu (or context menu) of the project node for an ASP.NET Core project in **Solution Explorer**, as shown in Figure 4-31:</span></span>

![Visual Studio の Docker サポートの追加メニュー オプション](media/add-docker-support-menu.png)

<span data-ttu-id="90587-119">**図 4-31**。</span><span class="sxs-lookup"><span data-stu-id="90587-119">**Figure 4-31**.</span></span> <span data-ttu-id="90587-120">Visual Studio 2019 プロジェクトに Docker サポートを追加する</span><span class="sxs-lookup"><span data-stu-id="90587-120">Adding Docker support to a Visual Studio 2019 project</span></span>

### <a name="add-docker-support"></a><span data-ttu-id="90587-121">Docker サポートの追加</span><span class="sxs-lookup"><span data-stu-id="90587-121">Add Docker support</span></span>

<span data-ttu-id="90587-122">前のセクションに示すような、Docker サポートを既存のアプリケーションに追加するオプションに加えて、プロジェクトの作成中に Docker サポートを有効にするには、図 4-32 に示すように、 **[新しいプロジェクト]** ダイアログ ボックスで **[OK]** をクリックすると開く **[新しい ASP.NET Core Web アプリケーション]** ダイアログ ボックスで、 **[Docker サポートを有効にする]** を選択します。</span><span class="sxs-lookup"><span data-stu-id="90587-122">Besides the option to add Docker support to an existing application, as shown in the previous section, you can also enable Docker support during project creation by selecting **Enable Docker Support** in the **New ASP.NET Core Web Application** dialog box that opens after you click **OK** in the **New Project** dialog box, as shown in Figure 4-32.</span></span>

![Visual Studio で新しい ASP.NET Core Web アプリの Docker サポートを有効にする](media/enable-docker-support-visual-studio.png)

<span data-ttu-id="90587-124">**図 4-32**。</span><span class="sxs-lookup"><span data-stu-id="90587-124">**Figure 4-32**.</span></span> <span data-ttu-id="90587-125">Visual Studio 2019 でプロジェクトの作成中に Docker サポートを有効にする</span><span class="sxs-lookup"><span data-stu-id="90587-125">Enable Docker support during project creation in Visual Studio 2019</span></span>

<span data-ttu-id="90587-126">Docker サポートを追加または有効にすると、Visual Studio によって _Dockerfile_ ファイルがプロジェクトに追加されます。このファイルには、ソリューションからの必要なすべてのプロジェクトへの参照が含まれています。</span><span class="sxs-lookup"><span data-stu-id="90587-126">When you add or enable Docker support, Visual Studio adds a _Dockerfile_ file to the project, that includes references to all required project from the solution.</span></span>

### <a name="add-container-orchestration-support"></a><span data-ttu-id="90587-127">コンテナー オーケストレーションのサポートを追加する</span><span class="sxs-lookup"><span data-stu-id="90587-127">Add container orchestration support</span></span>

<span data-ttu-id="90587-128">複数コンテナーのソリューションを構成する場合は、コンテナー オーケストレーションのサポートをプロジェクトに追加します。</span><span class="sxs-lookup"><span data-stu-id="90587-128">When you want to compose a multi-container solution, add container orchestration support to your projects.</span></span> <span data-ttu-id="90587-129">これにより、コンテナーのグループ (ソリューション全体) が同じ _docker-compose.yml_ ファイル内で定義されている場合、それらを同時に実行およびデバッグすることができます。</span><span class="sxs-lookup"><span data-stu-id="90587-129">This lets you run and debug a group of containers (a whole solution) at the same time if they're defined in the same _docker-compose.yml_ file.</span></span>

<span data-ttu-id="90587-130">コンテナー オーケストレーションのサポートを追加するには、**ソリューション エクスプローラー**でソリューションまたはプロジェクトのノードを右クリックし、**[追加] > [Container Orchestration Support]\(コンテナー オーケストレーション サポート\)** の順に選択します。</span><span class="sxs-lookup"><span data-stu-id="90587-130">To add container orchestration support, right-click on the solution or project node in **Solution Explorer**, and choose **Add > Container Orchestration Support**.</span></span> <span data-ttu-id="90587-131">次に、 **[Kubernetes/Helm]** または **[Docker Compose]** を選択して、コンテナーを管理します。</span><span class="sxs-lookup"><span data-stu-id="90587-131">Then choose **Kubernetes/Helm** or **Docker Compose** to manage the containers.</span></span>

<span data-ttu-id="90587-132">プロジェクトにコンテナー オーケストレーションのサポートを追加すると、図 4-33 に示すように、プロジェクトに Dockerfile が追加され、**ソリューション エクスプローラー**内のソリューションに **docker-compose** フォルダーが追加されるのを確認できます。</span><span class="sxs-lookup"><span data-stu-id="90587-132">After you add container orchestration support to your project, you see a Dockerfile added to the project and a **docker-compose** folder added to the solution in **Solution Explorer**, as shown in Figure 4-33:</span></span>

![Visual Studio のソリューション エクスプローラーの Docker ファイル](media/docker-support-solution-explorer.png)

<span data-ttu-id="90587-134">**図 4-33**。</span><span class="sxs-lookup"><span data-stu-id="90587-134">**Figure 4-33**.</span></span> <span data-ttu-id="90587-135">Visual Studio 2019 のソリューション エクスプローラーの Docker ファイル</span><span class="sxs-lookup"><span data-stu-id="90587-135">Docker files in Solution Explorer in Visual Studio 2019</span></span>

<span data-ttu-id="90587-136">_docker-compose.yml_ が既に存在する場合、Visual Studio により、構成コードの必要な行が単にそれに追加されます。</span><span class="sxs-lookup"><span data-stu-id="90587-136">If _docker-compose.yml_ already exists, Visual Studio just adds the required lines of configuration code to it.</span></span>

## <a name="configure-docker-tools"></a><span data-ttu-id="90587-137">Docker ツールを構成する</span><span class="sxs-lookup"><span data-stu-id="90587-137">Configure Docker tools</span></span>

<span data-ttu-id="90587-138">メイン メニューから **[ツール] > [オプション]** を選択し、**[コンテナー ツール] > [設定]** を展開します。</span><span class="sxs-lookup"><span data-stu-id="90587-138">From the main menu, choose **Tools > Options**, and expand **Container Tools > Settings**.</span></span> <span data-ttu-id="90587-139">コンテナー ツールの設定が表示されます。</span><span class="sxs-lookup"><span data-stu-id="90587-139">The container tools settings appear.</span></span>

![Visual Studio Docker ツールのオプションであり、3 つのページ ([全般]、[1 つのプロジェクト]、[Docker Compose])、記事のテキストに記載されている詳細を示しています。](media/visual-studio-docker-tools-options.png)

<span data-ttu-id="90587-141">**図 4-34**.</span><span class="sxs-lookup"><span data-stu-id="90587-141">**Figure 4-34**.</span></span> <span data-ttu-id="90587-142">Docker ツールのオプション</span><span class="sxs-lookup"><span data-stu-id="90587-142">Docker Tools Options</span></span>

<span data-ttu-id="90587-143">これらのオプションの設定方法を判断する際に、次の表を参照してください。</span><span class="sxs-lookup"><span data-stu-id="90587-143">The following table might help you decide how to set these options.</span></span>

| <span data-ttu-id="90587-144">ページ/設定</span><span class="sxs-lookup"><span data-stu-id="90587-144">Page/Setting</span></span>                                |  <span data-ttu-id="90587-145">既定の設定</span><span class="sxs-lookup"><span data-stu-id="90587-145">Default Setting</span></span>   | <span data-ttu-id="90587-146">説明</span><span class="sxs-lookup"><span data-stu-id="90587-146">Description</span></span>                                                                                                                                                                                                                                                                                                                                                                                                           |
| ------------------------------------------- | :----------------: | --------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| <span data-ttu-id="90587-147">**[全般] ページ**</span><span class="sxs-lookup"><span data-stu-id="90587-147">**General page**</span></span>                            |
| <span data-ttu-id="90587-148">必要に応じて Docker Desktop をインストールします</span><span class="sxs-lookup"><span data-stu-id="90587-148">Install Docker Desktop if needed</span></span>            |     <span data-ttu-id="90587-149">プロンプトを表示する</span><span class="sxs-lookup"><span data-stu-id="90587-149">Prompt me</span></span>      |
| <span data-ttu-id="90587-150">必要に応じて Docker Desktop を開始します</span><span class="sxs-lookup"><span data-stu-id="90587-150">Start Docker Desktop if needed</span></span>              |     <span data-ttu-id="90587-151">プロンプトを表示する</span><span class="sxs-lookup"><span data-stu-id="90587-151">Prompt me</span></span>      |
| <span data-ttu-id="90587-152">ASP.NET Core SSL 証明書を信頼する</span><span class="sxs-lookup"><span data-stu-id="90587-152">Trust ASP.NET Core SSL certificate</span></span>          |     <span data-ttu-id="90587-153">プロンプトを表示する</span><span class="sxs-lookup"><span data-stu-id="90587-153">Prompt me</span></span>      | <span data-ttu-id="90587-154">localhost SSL 証明書が信頼済み (`dotnet dev-certs https --trust`) としてマークされていない場合、プロジェクトを実行するたびに Visual Studio によって確認メッセージが表示されます。</span><span class="sxs-lookup"><span data-stu-id="90587-154">If the localhost SSL certificate hasn't been marked as trusted (with `dotnet dev-certs https --trust`), Visual Studio will prompt every time you run your project.</span></span>                                                                                                                                                                                                                                                    |
| <span data-ttu-id="90587-155">**[1 つのプロジェクト] ページ**</span><span class="sxs-lookup"><span data-stu-id="90587-155">**Single Project page**</span></span>                     |
| <span data-ttu-id="90587-156">プロジェクトを開く際に必要な Docker イメージをプルします</span><span class="sxs-lookup"><span data-stu-id="90587-156">Pull required Docker images on project open</span></span> |        <span data-ttu-id="90587-157">True</span><span class="sxs-lookup"><span data-stu-id="90587-157">True</span></span>        | <span data-ttu-id="90587-158">プロジェクトを実行するときのパフォーマンスを向上させるために、Visual Studio ではバックグラウンドで Docker のプル操作が開始されます。そのため、コードを実行する準備ができたときには、イメージは既にダウンロードされているかダウンロード中です。</span><span class="sxs-lookup"><span data-stu-id="90587-158">For increased performance when running the project, Visual Studio will start a Docker pull operation in the background so that when you're ready to run your code, the image is already downloaded or in the process of downloading.</span></span> <span data-ttu-id="90587-159">プロジェクトを読み込んでコードを参照するだけの場合は、これをオフにして不要なコンテナー イメージをダウンロードしないようにすることができます。</span><span class="sxs-lookup"><span data-stu-id="90587-159">If you're just loading projects and browsing code, you can turn this off to avoid downloading container images you don't need.</span></span> <span data-ttu-id="90587-160">これにより、ユーザーがプロジェクトを開く操作を行うのに時間がかかる可能性があります。</span><span class="sxs-lookup"><span data-stu-id="90587-160">This could slow the open project user experience.</span></span> |
| <span data-ttu-id="90587-161">更新された Docker イメージを、プロジェクトを読み込むときにプルする</span><span class="sxs-lookup"><span data-stu-id="90587-161">Pull updated Docker images on project load</span></span>  | <span data-ttu-id="90587-162">.NET Core プロジェクト</span><span class="sxs-lookup"><span data-stu-id="90587-162">.NET Core projects</span></span> | <span data-ttu-id="90587-163">既存のイメージに対する更新をプルして、プロジェクトを開くときに最新の更新プログラムを取得します。</span><span class="sxs-lookup"><span data-stu-id="90587-163">Pull updates to existing images to get the latest updates on project open.</span></span> <span data-ttu-id="90587-164">これにより、ユーザーがプロジェクトを開く操作を行うのに時間がかかる可能性があります。</span><span class="sxs-lookup"><span data-stu-id="90587-164">This could slow the open project user experience.</span></span>                                                                                                                                                                                                                                                                                          |
| <span data-ttu-id="90587-165">プロジェクトを閉じるときにコンテナーを削除する</span><span class="sxs-lookup"><span data-stu-id="90587-165">Remove containers on project close</span></span>          |        <span data-ttu-id="90587-166">True</span><span class="sxs-lookup"><span data-stu-id="90587-166">True</span></span>        | <span data-ttu-id="90587-167">プロジェクトを閉じるときにクリーンアップします。これにより、ユーザーがプロジェクトを閉じる操作を行うのに時間がかかる可能性がありますが、通常はすばやく行われます。</span><span class="sxs-lookup"><span data-stu-id="90587-167">Clean up on project close, This could slow the close project user experience but it's usually fast anyway.</span></span>                                                                                                                                                                                                                                                                                                            |
| <span data-ttu-id="90587-168">プロジェクトを開くときにコンテナーを実行する</span><span class="sxs-lookup"><span data-stu-id="90587-168">Run containers on project open</span></span>              |        <span data-ttu-id="90587-169">True</span><span class="sxs-lookup"><span data-stu-id="90587-169">True</span></span>        | <span data-ttu-id="90587-170">プロジェクトを実行するときのパフォーマンスを向上させるために、Visual Studio によってソリューション内のすべてのコンテナーの起動が行われます。</span><span class="sxs-lookup"><span data-stu-id="90587-170">For increased performance when running the project, Visual Studio will start all containers in the solution.</span></span> <span data-ttu-id="90587-171">これにより、ユーザーがプロジェクトを開く操作を行うのに時間がかかる可能性があります。</span><span class="sxs-lookup"><span data-stu-id="90587-171">This could slow the open project user experience.</span></span>                                                                                                                                                                                                                                                        |
| <span data-ttu-id="90587-172">**Docker Compose**</span><span class="sxs-lookup"><span data-stu-id="90587-172">**Docker Compose**</span></span>                          |                    | <span data-ttu-id="90587-173">[Docker Compose] ページには、[1 つのプロジェクト] ページと同じ設定が含まれていますが、この設定は複数コンテナーのソリューションに適用されます。</span><span class="sxs-lookup"><span data-stu-id="90587-173">The Docker Compose page contains the same settings as the Single Project page, but they apply to multi-container solutions.</span></span>                                                                                                                                                                                                                                                                                           |

> [!WARNING]
> <span data-ttu-id="90587-174">localhost SSL 証明書が信頼されていない場合にオプションを **[不可]** に設定すると、アプリまたはサービスの実行時に HTTPS Web 要求が失敗する可能性があります。</span><span class="sxs-lookup"><span data-stu-id="90587-174">If the localhost SSL certificate is not trusted, and you set the option to **Never**, then HTTPS web requests might fail at runtime in your app or service.</span></span> <span data-ttu-id="90587-175">その場合は、値を **[プロンプトを表示する]** の設定に戻すか、コマンド `dotnet dev-certs https --trust` を使用して、開発用コンピューターで証明書を再度信頼します。</span><span class="sxs-lookup"><span data-stu-id="90587-175">In that case, set the value back again to **Prompt me** or, better again, trust the certificates in your dev machine using the command `dotnet dev-certs https --trust`.</span></span>

> [!TIP]
> <span data-ttu-id="90587-176">サービスの実装と、Visual Studio Tools for Docker の使用方法の詳細については、以下の記事を参照してください。</span><span class="sxs-lookup"><span data-stu-id="90587-176">For further details on the services implementation and use of Visual Studio Tools for Docker, read the following articles:</span></span>
>
> <span data-ttu-id="90587-177">ローカルの Docker コンテナーでのアプリのデバッグ (<https://docs.microsoft.com/azure/vs-azure-tools-docker-edit-and-refresh>)</span><span class="sxs-lookup"><span data-stu-id="90587-177">Debug apps in a local Docker container: <https://docs.microsoft.com/azure/vs-azure-tools-docker-edit-and-refresh></span></span>
>
> <span data-ttu-id="90587-178">Visual Studio を使用して ASP.NET Docker コンテナーをコンテナー レジストリにデプロイする: <https://docs.microsoft.com/azure/vs-azure-tools-docker-hosting-web-apps-in-docker></span><span class="sxs-lookup"><span data-stu-id="90587-178">Deploy an ASP.NET container to a container registry using Visual Studio: <https://docs.microsoft.com/azure/vs-azure-tools-docker-hosting-web-apps-in-docker></span></span>

> [!div class="step-by-step"]
> <span data-ttu-id="90587-179">[前へ](docker-apps-inner-loop-workflow.md)
> [次へ](set-up-windows-containers-with-powershell.md)</span><span class="sxs-lookup"><span data-stu-id="90587-179">[Previous](docker-apps-inner-loop-workflow.md)
[Next](set-up-windows-containers-with-powershell.md)</span></span>
